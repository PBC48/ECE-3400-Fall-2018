<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>The 7-Ups - ECE 3400 Fall 2018 Team 7</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="css/freelancer.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">The 7-Ups</a>
        <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#members">Members</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contract">Contract</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#ethics">Ethics</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#labs">Labs</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#milestones">Milestones</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead bg-primary text-white text-center">
      <div class="container">
        <img class="img-fluid mb-5 d-block mx-auto" src="images/bootstrap/header.png" alt="">
        <h1 class="text-uppercase mb-0">The 7-Ups</h1>
        <hr class="star-light">
        <h2 class="font-weight-light mb-0">ECE 3400 2018 Lab Group 7</h2>
        <p> We are the 7-Ups, and welcome to our website! For the entire semester, we worked tirelessly
          on our little robot friend to make sure they could be the most bubbly effervescent go-getter in
          the maze! Here's our family photo:
        </p>
          <img class="img fluid mb-5 d-block mx-auto" src="images/IMG_1200.png">
        <p>
          Please read through the website to see how our little buddy grew up and for tips on how to make your
          own little buddy!
        </p>
      </div>
    </header>

    <!-- Portfolio Grid Section -->
    <section class="portfolio bg-tertary" id="members">
      <div class="container">
        <h2 class="text-center text-uppercase text-secondary mb-0">Members</h2>
        <hr class="star-dark mb-5">
        <div class="row">
          <div class="col-md-3 col-lg-3">
            <img class="img-fluid rounded-circle" src="images/headshot-Xiaoyu.PNG" alt="">
            <h3 ALIGN=CENTER>Xiaoyu Yan</h3>
            <h4 ALIGN=CENTER>Junior ECE</h4>
            <ul ALIGN=CENTER class="list-inline mb-0">
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://github.com/xy97cornell">
                  <i class="fab fa-fw fa-github"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://www.linkedin.com/in/xiaoyu-yan-50728a127/">
                  <i class="fab fa-fw fa-linkedin-in"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-3 col-lg-3">
            <img class="img-fluid rounded-circle" src="images/headshot-Chrissy.png" alt="">
            <h3 ALIGN=CENTER>Christine Mayer</h3>
            <h4 ALIGN=CENTER>Junior ECE</h4>
            <ul ALIGN=CENTER class="list-inline mb-0">
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://github.com/clm293">
                  <i class="fab fa-fw fa-github"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://www.linkedin.com/in/christine-mayer-11120913a/">
                  <i class="fab fa-fw fa-linkedin-in"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-3 col-lg-3">
            <img class="img-fluid rounded-circle" src="images/headshot-Patrick.png" alt="">
            <h3 ALIGN=CENTER>Patrick Clobridge</h3>
            <h4 ALIGN=CENTER>Senior ECE</h4>
            <ul ALIGN=CENTER class="list-inline mb-0">
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://github.com/PBC48/">
                  <i class="fab fa-fw fa-github"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://www.linkedin.com/in/patrick-clobridge-a62ba0b4/">
                  <i class="fab fa-fw fa-linkedin-in"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-3 col-lg-3">
            <img class="img-fluid rounded-circle" src="images/taravn_headshot.jpg" alt="">
            <h3 ALIGN=CENTER>Tara Van Nieuwstadt</h3>
            <h4 ALIGN=CENTER>Junior ECE</h4>
            <ul ALIGN=CENTER class="list-inline mb-0">
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://github.com/taravns">
                  <i class="fab fa-fw fa-github"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a class="btn btn-outline-light btn-social text-center rounded-circle" href="https://www.linkedin.com/in/tara-van-nieuwstadt-7a3174161/">
                  <i class="fab fa-fw fa-linkedin-in"></i>
                </a>
              </li>
            </ul>
          </div>
       </div>
    </section>

    <section class="portfolio bg-secondary" id="robot">
            <div class="container">
              <h2 class="text-center text-uppercase text-secondary mb-0">Our Robot</h2>
              <hr class="star-dark mb-5">
              <div class="row">
                <div class="col-md-12 col-lg-12">
                  <a class="portfolio-item d-block mx-auto" href="#robot-modal-1">
                    <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                      <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                        <i class="fas fa-search-plus fa-3x"></i>
                      </div>
                    </div>
                    <img class="img-fluid rounded-circle" src="images/final_competition/IMG_1190.jpg" alt="">
                  </a>
                </div>
             </div>
          </section>
      
    <section class="portfolio bg-secondary" id="contract">
      <div class="container">
        <h2 class="text-center text-uppercase text-secondary mb-0">Contract</h2>
        <hr class="star-dark mb-5">
        <div class="row">
          <div class="col-md-12 col-lg-12">
            <a class="portfolio-item d-block mx-auto" href="#contract-modal-1">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/contracts.gif" alt="">
            </a>
          </div>
       </div>
    </section>
      
    <section class="portfolio bg-tertary" id="ethics">
      <div class="container">
        <h2 class="text-center text-uppercase text-secondary mb-0">Ethics</h2>
        <hr class="star-dark mb-5">
        <div class="row">
          <div class="col-md-12 col-lg-12">
            <a class="portfolio-item d-block mx-auto" href="#ethics-modal-1">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid rounded-circle" src="images/bootstrap/ethics.gif" alt="">
            </a>
          </div>
       </div>
    </section>

    <section class="portfolio bg-tertary" id="labs">
      <div class="container">
        <h2 class="text-center text-uppercase text-secondary mb-0">Labs</h2>
        <hr class="star-dark mb-5">
        <div class="row">
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-1">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/lab1-bootstrap.png" alt="">
            </a>
            <h3 ALIGN=CENTER>Lab 1</h3>
          </div>
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-2">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/lab2-bootstrap.png" alt="">
            </a>
            <h3 ALIGN=CENTER>Lab 2</h3>
          </div>
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-3">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/lab3-bootstrap.png" alt="">
            </a>
            <h3 ALIGN=CENTER>Lab 3</h3>
          </div>
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-4">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/lab4-bootstrap.png" alt="">
            </a>
            <h3 ALIGN=CENTER>Lab 4</h3>
          </div>
       </div>
    </section>
      
    <section class="portfolio bg-secondary" id="milestones">
      <div class="container">
        <h2 class="text-center text-uppercase text-secondary mb-0">Milestones</h2>
        <hr class="star-dark mb-5">
        <div class="row">
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-5">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/milestone1.gif" alt="">
            </a>
            <h3 ALIGN=CENTER>Milestone 1</h3>
           </div>
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-6">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/milestone2.gif" alt="">
            </a>
            <h3 ALIGN=CENTER>Milestone 2</h3>
          </div>
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-7">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/milestone3.gif" alt="">
            </a>
            <h3 ALIGN=CENTER>Milestone 3</h3>
          </div>
          <div class="col-md-6 col-lg-3">
            <a class="portfolio-item d-block mx-auto" href="#portfolio-modal-8">
              <div class="portfolio-item-caption d-flex position-absolute h-100 w-100">
                <div class="portfolio-item-caption-content my-auto w-100 text-center text-white">
                  <i class="fas fa-search-plus fa-3x"></i>
                </div>
              </div>
              <img class="img-fluid" src="images/bootstrap/milestone4.gif" alt="">
            </a>
            <h3 ALIGN=CENTER>Milestone 4</h3>
          </div>
        </div>
      </div>
    </section>

    
    <!-- Footer -->
    <footer class="footer text-center bg-primary">
      <div class="container">
        <div class="row">
          <div class="col-md-6 mb-5 mb-lg-6">
            <a href = "https://github.com/PBC48/ECE-3400-Fall-2018" class = "btn btn-primary">Check out our GitHub</a>
          </div>
          <div class="col-md-6">
            <h4 class="text-uppercase mb-4">About The 7-Ups</h4>
            <p class="lead mb-0">The 7-Ups is just your average run-of-the-mill junior and senior group.
              Fun fact: 3 of us are in the Big Red Marching Band. One of us plays soccer for Cornell.</p>
          </div>
        </div>
      </div>
    </footer>
    <div class="copyright py-4 text-center text-white">
      <div class="container">
        <small>Copyright would go here, but we don't need it.</small>
      </div>
    </div>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-to-top d-lg-none position-fixed ">
      <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
        <i class="fa fa-chevron-up"></i>
      </a>
    </div>

    <!--ROBOT DESIGN-->
    <div class='portfolio-modal mfp-hide' id="robot-modal-1">
        <div class="portfolio-modal-dialog bg-white">
            <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
              <i class="fa fa-4x fa-times"></i>
            </a>
            <div class="container text-center">
              <div class="row">
                <div class="col-lg-6 mx-auto">
                  <h2 class="text-secondary text-uppercase mb-0">ROBOT</h2>
                  <hr class="star-dark mb-5">
                  <img class="img-fluid mb-5" src="images/bootstrap/ethics.gif" alt="">
                  <p ALIGN=LEFT>
                        
                  </p>
                  <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                    <i class="fa fa-close"></i>
                  Close Project</a>
                </div>
              </div>
            </div>
          </div>
    </div>

    <!-- Contract Modals -->
    <div class="portfolio-modal mfp-hide" id="contract-modal-1">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Team & Contract</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/contracts.gif" alt="">
              <p ALIGN=LEFT>
                ECE 3400, FALL 2018 Team 7
                Team Members: Patrick Clobridge, Tara Van Nieuwstadt, Xiaoyu Yan, Chrissy Mayer
              <h2>Team Procedures</h2>
              <ol type="1" ALIGN=LEFT>
                <li>Day, time, and place for regular team meetings:
                    <ul>
                  <li>UH142, Friday 11.15-12.05pm, weekly.</li>
                  <li>Alternate time and place: Duffield, Wednesday 12.10-1.10.</li>
                  <li> Other times will be considered at discretion.
                  (We suggest allocating more time towards the end of the semester) </li>
                </ul>
                <li>Preferred method of communication (e.g., e-mail, cell phone, wired phone, Blackboard Discussion Board, face-to-face, in a certain class) in order to inform each other of team meetings, announcement, updates, reminders, problems:
                  Groupme
                <li> Decision-making policy (by consensus? by majority vote?):
                  Consensus
                <li> Method for setting and following meeting agendas (Who will set each agenda? When? How will team members be notified/reminded? Who will be responsible for the team following the agenda during a team meeting?  What will be done to keep the team on track during a meeting?):
                  <p>Agenda assignee will rotate among members every four weeks as specified 
                        in the Team Leadership section below. Agenda will be determined by the 
                        designated member before each meeting with input from other members 
                        regarding desired discussion topics. We will be reminded via groupme. 
                        Everyone is responsible for following the agenda. If someone gets off 
                        track, we will guide the conversation back on topic. The person who 
                        created the agenda will be primarily responsible for following it.</p>
                <li> Method of record keeping (Who will be responsible for recording & disseminating minutes?  How & when will the minutes be disseminated?  Where will all agendas & minutes be kept?):
                  <p>Keep track of records on Google Drive. All documents and reports as 
                        well as meeting agendas and minutes will be disseminated via Google 
                        Drive and Groupme if someone is missing from the meeting. The team 
                        will collectively create a succint summary of what was discussed or 
                        accomplished during the meeting before dispersing; these will be the 
                        meeting minutes.</p>
                </li>
              </ol>
              <h2>Team Expectations</h2>
              <h4>Work Quality:</h4>
              We all want to get an A in this class really badly. So, we will make sure 
              that our work is pristine, comments are understandable and well marked, and 
              generated processes will be well documented for ease of the next user.
              <ol type="1" ALIGN=LEFT>
                <li> Project Standards
                  Team presentations are to be rehearsed, collaborative writing needs to be peer
                  reviewed, individual research has to be well documented and thorough, preparation 
                  of drafts should be case by case, where we all understand the purpose, and peer
                  reviews are to be thorough, no detail left unchecked (We don't want another 
                  Challenger to happen!)
                <li> Strategies to fulfill these standards:
                  Team Participation: Hold each other and yourself accountable for the work done 
                  (Don't let your teammates down, don't mess up the PK!)
                  Communicate clearly on your expectations. Don't let things that bother you build up.
                <li> Strategies to ensure cooperation and equal distribution of tasks:
                  Keep in mind how much time each task takes, and take into account previous experience,
                  while at the same time giving people the chance to work on tasks that they are interested in.
                <li> Strategies for encouraging/including ideas from all team members (team maintenance):
                  Listen to everyone's ideas. Have ideas thoroughly developed before each meeting.
                <li> Strategies for keeping on task (task maintenance):
                  Develop task deadlines before each meeting to establish the reality of each deadline. 
                  Keep track of deadlines on Google Drive and place in our calendars.
                <li> Preferences for leadership (informal, formal, individual, shared):
                  shared, informal leadership.
              </ol>
              <h4>Personal Accountability</h4>
              <ol type="1">
                <li> Attendance, punctuality, and participation are required, unless if a member has conflicting issues come up.
                  Attendance, punctuality, and participation are required, unless if a member has conflicting issues come up.
                <li> Expected level of responsibility for fulfilling team assignments, timelines, and deadlines:
                  High level of responsibility for all three.
                <li> Expected level of communication with other team members:
                  Whenever someone completes a task or is having on a task, they should communicate.
                <li> Expected level of commitment to team decisions and tasks:
                  Everyone should be in on decisions and tasks.
              </ol>
              <h3>Consequences for Failing to Follow Procedures and Fulfill Expectations</h3>
              <ol type="1">
                <li> Describe, as a group, you would handle infractions of any of the obligations of this team contract:
                  They are responsible for taking care of agenda for week after infraction.
                <li> Describe what your team will do if the infractions continue:
                  You'll have to keep doing agenda stuff, or we'll bring it up with the Prof.
              </ol ALIGN=LEFT>
              <h2>Team Leadership</h2>
              Every person on the team will have to take the role as a leader. The role of the leader will be to organize 
              meetings and make sure that everything is submitted in a timely manner. 
              
              <p>(Split up the time according to the number of members, below is an example for a team of 4).</p>

              <p>Week 1-4 (Start-up, Lab 1, Milestone 1): Chrissy Mayer  </p>

              <p>Week 5-8 (Lab 2, Lab 3, Milestone 2): Patrick Clobridge</p>

              <p>Week 9-12 (Lab 4, Milestone 3): Tara van Nieuwstadt </p>

              <p>Week 13-16 (Milestone 4, competition, final report): Xiaoyu Yan</p>
              
              <hr>
              
              <ol type="a">
                <li> I participated in formulating the standards, roles, and procedures as stated in this contract.
                <li> I understand that I am obligated to abide by these terms and conditions.
                <li> I understand that if I do not abide by these terms and conditions, I will suffer the consequences as stated in this contract.
              </ol>
              <ol type="1" ALIGN=LEFT>
                <li> Xiaoyu Yan                                       date  8/31/2018
                <li> Patrick Clobridge                                date  8/31/2018
                <li>Chrissy Mayer                                    date  8/31/2018
                <li>Tara van Nieuwstadt                              date  31 August 2018
              </ol>
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
              Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>
      
    <!-- Ethics Modals -->
    <div class="portfolio-modal mfp-hide" id="ethics-modal-1">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Ethics</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/ethics.gif" alt="">
              <p ALIGN=LEFT>
                    <h5>Is "a ban on offensive autonomous weapons beyond meaningful human control" going to work?</h5>
                    <p ALIGN=LEFT>In their open letter on the topic of autonomous weapon systems, experts in the field of Artificial Intelligence including Elon Musk and Stephen Hawking warn of the danger a global AI arms race poses to humanity.  They call for an international ban on “offensive autonomous weapons beyond meaningful human control,” asserting that this is the only way to avoid a third revolution in warfare.  Further unbridled development of the technology would lead to increased instability worldwide once they are amassed by major military powers and available on the black market, exacerbated by how cheaply manufacturable these weapons will eventually become.
                    </p>
                    <p ALIGN=LEFT>While we agree that so-called “killer robots” are incredibly dangerous and could be used for downright evil purposes well outside the Law of War, we do not think it is practical from a security to standpoint to place trust in the effectiveness of an international ban.  It would be incredibly irresponsible to stop development of this technology because other major military powers “agree” to do the same.  These are weapons of mass destruction, and an unpoliced attack by any military power could be unimaginably deadly.</p>
                    <p ALIGN=LEFT>We would draw a parallel between this issues and nuclear weapons rather than an issue like gun control.  With respect to automatic firearms, the argument is often made that stricter gun laws leads to less guns everywhere leads to less deaths due to gun violence.  In contrast, due mostly to the magnitude of potential casualties, it does not seem like a similar idea is practical with respect to autonomous weapons, like we have seen with the nuclear arms race.
                    </p>
                    <p ALIGN=LEFT>However, strict regulation is needed as progress continues.  At least domestically, it will be necessary to keep close tabs on the researchers working in this area as well as who has access to the details of its development.  It is unallowable for obvious reasons to allow rogue programmers to implement this “killer robot” technology.  Perhaps a government encryption system could be used to regulate who has access to all existing progress that will be advanced upon.  There needs to be a proactive security system robust enough that not just any CS graduate or advanced hacker can implement this dangerous weapon (in the vein of regulating blueprints for the 3D printing of guns). 
                    </p>
                    <p ALIGN=LEFT>As has been proven time and again over the course of history, it will be impossible to stop the progress of science in this field.  The stakes are high: this issue could grow as significant as that of a nuclear holocaust. Therefore, it is within the best interest of humanity to step ahead of the curve regarding regulation.  
                    </p>
                    <h5>ECE’s CAN DO EVERYTHING
                    </h5>
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
              Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Portfolio Modals -->

    <!-- Portfolio Modal 1 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-1">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Lab 1: Microcontrollers</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/lab1-bootstrap.png" alt="">
              <p class="mb-5">
                <h3>Objectives</h3>
                <ul ALIGN=LEFT>
                  <li>Familiarize ourselves with the Arduino IDE and Arduino Uno</li>
                  <li>Learn introductory Arduino programming and basic Arduino functionalities</li>
                  <li>Create simple circuits and Arduino programs to explore digital and analog Arduino I/O ports, built-in Arduino functions, and serial communication</li>
                  <li>Construct our robot and write a program to make it move in a square</li>
                </ul>
                <br/>
                <h3>Introduction</h3>
                <p ALIGN=LEFT>In Lab 1, we began with using digital I/O pins to make internal and external LEDs blink.
                  We then used a potentiometer to explore using analog circuits with the Arduino. We started 
                  by simply reading out analog values from the potentiometer on the serial port. Then we used 
                  these values to adjust the brightness of an external LED and the speed of a continuously 
                  rotating servo. The lab culminated in building a functional robot that could drive autonomously in a square.
                </p>
                <br/>
                <h3>Blink</h3>
                <p ALIGN=LEFT>We made the Uno’s built-in LED blink by running an Arduino example code, found as follows:</p>
                <figure ALIGN=CENTER>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/blinkAccessScreenshot.png" width="560"/>
                  <font size="2">
                    <figcaption> Blinking LED example code location
                    </figcaption>
                  </font>
                </figure>
                <p ALIGN=LEFT>The code worked as expected, as can be seen by the 
                  following demonstration of the internal LED blinking:
                </p>
                <iframe ALIGN=LEFT width="560" height="315" 
                      src="https://www.youtube.com/embed/pbVh3dkpa-c?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0"
                      allow="autoplay; encrypted-media" allowfullscreen>
                </iframe>
                <br/>
                <br/>
                <h3>Serial Monitor and Analog Pins</h3>
                <p ALIGN=LEFT>To experiment with using the serial monitor and analog pins, 
                  we tested reading values from a potentiometer. We connected the potentiometer 
                  to the Arduino by connecting its output to an analog input pin of the Arduino, 
                  and connecting the potentiometer to the Arduino's 5V power and ground. To avoid 
                  accidentally short-circuiting the LED, we also added a 300 Ohm resistance in 
                  series with the potentiometer. We used the analogRead() function to read the 
                  potentiometer values and used the Serial.println() function to print those values 
                  to the serial monitor. These functions are included in the code for the LED analog 
                  output.
                </p>
                <br/>
                <h3>LED Analog Output</h3>
                <p ALIGN=LEFT>Next, we used the analog output from the potentiometer to control the 
                  brightness of the LED. After reading the potentiometer value, we adjusted that value 
                  and used the analogWrite() function to output it to an Arduino pin with PWM 
                  capability (pin 10 in the code below). We had to adjust the output value to be within 
                  the range accepted by the analogWrite() function; the potentiometer readings returned 
                  values between 0 and 1023, and the analogWrite() function accepts values between 0 and 
                  255.
                </p>
                <figure ALIGN=LEFT>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Code-analog.PNG" width="560">
                  <font size="2">
                  <figcaption> Writing Potentiometer Values to LED Code
                  </figcaption>
                  </font>
                </figure>
                <p ALIGN=LEFT>We set up a circuit according to the following schematic, similar to what we 
                  had already set up to read the potentiometer values and adding the connection of the LED
                  to a PWM pin:
                </p>
                <figure ALIGN=LEFT>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Schematic-PotentiometerBlink.PNG" width="560">
                  <font size="2">
                  <figcaption> Schematic for controlling LED brightness with potentiometer
                  </figcaption>
                  </font>
                </figure>
                <br/>
                <h3>Servo</h3>
                <p ALIGN=LEFT>We used the Arduino analog I/O pins to control the turn direction and speed of
                  continuously rotating servos. We relied primarily on the Arduino’s servo library to control
                  the servo. On a high level, we dictated which analog I/O port (PWM pin) would be used to 
                  control the servos and then used the write function of the servo library to dictate the speed 
                  and direction of the servo. We combined the servo with the potentiometer in a similar way to 
                  what we did with the potentiometer and LED, allowing the potentiometer to control the speed 
                  and direction of the servo by adjusting the value read from the potentiometer and writing it 
                  to the servo via a PWM pin (pin 10 in the code below).
                </p>
                <figure ALIGN=CENTER>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Code-Servo.PNG" width="560">
                  <font size="2">
                  <figcaption> Writing Potentiometer Values to Servo Code
                  </figcaption>
                  </font>
                </figure>
                <p ALIGN=LEFT>We set up a circuit according to the schematic below, similar to what we had 
                  created for the LED and adding in the servo connection to the PWM pin and the Arduino circuit:
                </p>
                <figure ALIGN=CENTER>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Schematic-ServoPotentiometer.PNG" width="560">
                  <font size="2">
                  <figcaption> Schematic for controlling servo with potentiometer
                  </figcaption>
                  </font>
                </figure>
                <p ALIGN=LEFT>Adjusting the potentiometer changed the speed and direction of the servo as we 
                  expected, and as is shown in the following demonstration of servos controlled via the potentiometer:
                </p>
                <iframe ALIGN=CENTER width="560" height="315" 
                        src="https://www.youtube.com/embed/rJJShOBNLfM?rel=0&amp;controls=0&amp;showinfo=0" 
                        frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
                </iframe>
                <br/>
                <h3>Robot</h3>
                <p>We built the robot consisting of a chassis and two servos with wheels attached, and mounted 
                  the Arduino on top of the chassis.  We also attached a 5V DC phone charging port to power the 
                  robot.  Finally, we wrote a simple Arduino program for the robot to drive in a square.
                </p>
                <figure ALIGN=CENTER>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/robot.jpg" width="560">
                  <font size="2">
                  <figcaption> Assembled Robot
                  </figcaption>
                  </font>
                </figure>

                <figure ALIGN=CENTER>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Code-robotDrive.PNG" width="560">
                  <font size="2">
                  <figcaption> Robot Square Driving Code
                  </figcaption>
                  </font>
                </figure>

                <p ALIGN=LEFT>The circuit on the robot is set up according the following schematic:</p>

                <figure ALIGN=CENTER>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Schematic-Robot.PNG" width="560">
                  <font size="2">
                  <figcaption> Schematic for current robot
                  </figcaption>
                  </font>
                </figure>
                <p ALIGN=LEFT>The robot was able to move autonomously as we had directed, as shown in the following 
                  demonstration of the robot moving in a square:
                </p>

                <iframe ALIGN=CENTER width="560" height="315" 
                        src="https://www.youtube.com/embed/az1fnLFKQlA?rel=0&amp;controls=0&amp;showinfo=0&amp;start=1" 
                        frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
                </iframe>
                <br/>
                <h3>Conclusion and Result</h3>
                <p ALIGN=LEFT>The robot moved as expected in the square and there were no problems with the speed of the servos. 
                  However, we did encounter a problem with the direction of one of the motors.  The orientation of the 
                  two motors was inconsistent so the right and left wheels spun in opposite directions.  This slightly 
                  complicated the code to direct the robot, requiring a roundabout solution even to go in a straight line. 
                  In the next lab section, we will fix the installation of the wheels by reversing the orientation of one 
                  of the wheels.
                </p> 
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 2 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-2">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Lab 2 : Analog Circuitry and FFTs</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/lab2-bootstrap.png" alt="">
              <p class="mb-5">
                <h3>Objectives</h3>
                <ul ALIGN=LEFT>
                  <li>Understand and Utilize the FFT Library
                  <li>Implement 660Hz Tone Detection
                  <li>Implement 6.08kHz IR signal detection, ignoring decoys
                </ul>
                <h3>Introduction</h3>
                <p ALIGN=LEFT>
                  In lab 2, we added hardware sensors and signal processing capabilities to the robot. 
                  We split into two subteams, with Tara and Chrissy working on acoustics and Xiaoyu and 
                  Patrick on optical sensing. The start of our final maze will commence with a 660 Hz 
                  whistle blow, so the acoustic team used an Electret microphone and an amplifying circuit 
                  to detect the tone and distinguish it from background noise.  The optical group used an 
                  IR transistor to detect other robots emitting IR at 6.08kHz, and ignore decoys (18kHz).
                </p>
                <h3>FFT Analysis</h3>
                <p ALIGN=LEFT>
                  The “Fast Fourier Transform” is an operation that uses the Discrete Time Fourier Transform 
                  in a time-efficient method to sample a signal over time and return its frequency components. 
                  Because both sub teams had to implement algorithms to detect specific frequencies in a noisy 
                  environment, we began the lab by familiarizing ourselves with the Arduino Open Music Labs FFT 
                  library in order to allow us to use digital filters to process these signals. We each 
                  installed the library in our Arduino IDE and studied the example script fft_adc_serial, 
                  with the goal of understanding how to use the FFT library and identifying the frequency 
                  bin where we should look for our signal. First, we looked at the sampling frequency of 
                  the ADC. There are two ways to identify this rate -- the first is to use the oscilloscope
                  and the <code>digitalWrite()</code> function to change the state of the digital pin whenever the ADC 
                  finishes one conversion. The scope will then measure the frequency of the output wave. 
                  Based on our implementation, we know that the ADC converts two values per period, so the 
                  frequency is about 38 kHz.  
                </p>
                <figure ALIGN-LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/frequency%20of%20ADC.PNG" width="560"/>
                    <font size="2">
                    <figcaption> <b> Frequency of the ADC </b>
                    </figcaption>
                    </font>
                </figure>
                <br/>
                <p ALIGN=LEFT>
                  To confirm this result, we referenced Section 28 of the ATmega328 datasheet, which provides 
                  information about the ADC. It indicates that the last 3 bits of the ADC Control and Status 
                  Register A determine a prescalar by which the Arduino clock frequency is divided to determine 
                  the ADC clock frequency. The example script fft_adc_serial sets this division factor to 32 in 
                  the second line of the code snippet below.  Given the 16MHz Arduino system clock frequency and 
                  the 13 clock cycles it takes the ADC to convert, we used the formula (Arduino clock cycle / 
                  total conversion clock cycles / prescalar) to find the 38 kHz sampling frequency. 
                  <br/>
                  Calling the FFT function is simple using the Music Labs' library where we first must setup the ADC settings:
                </p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>ADMUX <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0x40</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// use adc0</span>
ADCSRA <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0xe5</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// adc prescalar</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 05:49:42 UTC -->

                <p ALIGN=LEFT>
                  The FFT libraries takes care of the actual calculations of frequencies from the analog input to FFT outputs. 
                  We had to take the necessary samples for the library to calculate:
                </p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> i <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span> <span style='color:#0000ff; '>;</span> i <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>512</span> <span style='color:#0000ff; '>;</span> i <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>2</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>{</span> <span style='color:#008000; '>// save 256 samples</span>
    <span style='color:#0000ff; font-weight:bold; '>while</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>!</span><span style='color:#0000ff; '>(</span>ADCSRA <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x10</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// wait for adc to be ready</span>
    ADCSRA <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0xf7</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// restart adc</span>
    byte m <span style='color:#0000ff; '>=</span> ADCL<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// fetch adc data</span>
    byte j <span style='color:#0000ff; '>=</span> ADCH<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>int</span> k <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>j <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>8</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>|</span> m<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// form into an int</span>
    k <span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0x0200</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// form into a signed int</span>
    k <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>6</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// form into a 16b signed int</span>
    fft_input<span style='color:#0000ff; '>[</span>i<span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> k<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// put real data into even bins</span>
    fft_input<span style='color:#0000ff; '>[</span>i<span style='color:#0000ff; '>+</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// set odd bins to 0</span>
<span style='color:#0000ff; '>}</span>
fft_window<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// window the data for better frequency response</span>
fft_reorder<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// reorder the data before doing the fft</span>
fft_run<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// process the data in the fft</span>
fft_mag_log<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// take the output of the fft</span>
</pre>
                <!--Created using ToHtml.com on 2018-11-29 06:01:47 UTC -->
                
                <p ALIGN=LEFT>
                  Once this is down we can grab our data using<br/><code>fft_log_out</code><br/>
                  which hosts the stored data in bins with a specific frequency range per bin.
                </p>
                
                <h3>Acoustic Team </h3>
                
                <p ALIGN=LEFT>
                  From our analysis of the FFT and our determination of the frequency bin width, 
                  we determined that our 660Hz audio signal should fall in the fifth bin. We 
                  confirmed this by inputting a 660Hz sine wave from a function generator through 
                  a 330-ohm resistor into an analog Arduino pin and running the example fft_adc_serial 
                  code. We graphed the FFT output, as shown below. From this graph we saw our expected 
                  peak in the fifth bin.
                </p>
                <figure ALIGN=LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/fft_660.PNG" width="560"/>
                    <font size="2">
                    <figcaption> <b>FFT output from fft_adc_serial example code with 660Hz Signal from Function Generator </b>
                    </figcaption>
                    </font>
                </figure>
                <p ALIGN=LEFT>Next we created the simple microphone circuit from the lab document:</p>
                <figure ALIGN=LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/simple_microphone.PNG" width="300"/>
                    <font size="2">
                    <figcaption><b> Basic Microphone Circuit from Lab Document</b>
                    </figcaption>
                    </font>
                </figure>
                <p ALIGN=LEFT>
                  Although we had trouble getting any signal out of the microphone at first, we eventually 
                  were able to see a response on the oscilloscope when we played a 660Hz tone near the 
                  microphone from a tone generator on our phones. We observed that the amplitude of the 
                  signal was around 40 mV, and the output was unsteady and weak. 
                  <br/>
                  To amplify this signal to a more detectable and readable value, we created a simple 
                  non-inverting amplifier, starting with a modest gain of around 5 to be safe. We first 
                  tested the amplifier with an input signal from the function generator, reading the output 
                  on the oscilloscope. For a while we were not able to obtain any output signal at all. 
                  After switching our op amp from an LF353 to LM358AN, the amplifier worked as expected; 
                  we saw the desired output and amplification.
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/amp_input.jpg" width = "560"/>
                  <br/>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/amp_output3.jpg" width = "560"/>
                  <br/>
                  We then put the microphone output through the amplifier. We again were not able to obtain 
                  any output signal, so we re-examined our connection between the microphone and amplifier 
                  and added a DC bias. Rather than send the simple microphone circuit output straight into 
                  the amplifier, we decided to keep the capacitor from the example circuit to remove its DC 
                  offset, and use a voltage divider to create a small, 50mV bias at the input to the amplifier. 
                  This allowed us to control our DC offset and left room for a large amplification. After 
                  solving this problem, we successfully increased our amplification to around 52. We played 
                  the 660Hz tone near the microphone and read the output to the scope to confirm that the 
                  signal was what we expected it to be. Our final design was the following amplifier circuit:
                </p>
                <figure ALIGN=LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/Acoustic.png" width="600"/>
                    <font size="2">
                    <figcaption> <b>Acoustic Amplifier Circuit Design</b>
                    </figcaption>
                    </font>
                </figure>
                <p ALIGN-LEFT>
                  Finally, we connected the output from the amplified microphone signal to an analog Arduino 
                  pin and ran the FFT code. For clarity, we plotted only the bin 5 output on the serial plotter, 
                  and watched it spike when we brought the 660Hz tone near the microphone. In an effort to 
                  filter out more ambient noise, we narrowed the bin frequency width by changing the prescalar 
                  for the ADC clock input to 128. This was done by changing the ADC Control and Status Register A:
                  <br/>
<code ALIGN=LEFT>ADCSRA = 0xe5;</code>
                  <br/>
                  Re-calculating the frequency bin width we determined we should find our 660Hz frequency in bin 19, 
                  and we confirmed this by running the FFT and plotting the results:
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/fft_660_128.PNG" width="560"/>
                      <font size="2">
                      <figcaption><b> Acoustic Amplifier Circuit Design</b>
                      </figcaption>
                      </font>
                  </figure>
                  As a finishing touch, we created a placeholder “robot start” function by lighting an LED whenever 
                  the 660Hz tone was detected, which we did by setting a threshold intensity value for bin 19 as shown 
                  in the following code:
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>fft_log_out<span style='color:#0000ff; '>[</span><span style='color:#800000; '>18</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>90</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
digitalWrite<span style='color:#0000ff; '>(</span>LED<span style='color:#0000ff; '>,</span>HIGH<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span> <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; '>{</span>
digitalWrite<span style='color:#0000ff; '>(</span>LED<span style='color:#0000ff; '>,</span>LOW<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 06:03:31 UTC -->
                  A demonstration of this detection is shown in the following video:
                </p>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/JvM9OUa2xY0?controls=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                <h3>Optical</h3>
                <h5>Initial Design</h5>
                <p ALIGN=LEFT>We used the OP598A phototransistor to detect IR signals. The phototransistor was built exactly 
                like the schemamtic from the lab, with a 1.8k reistor connected to 5V power supply and the 
                photoresistor connected to ground. We first put that output into the oscilioscope and got the 
                following reading for FFT: 
                <figure ALIGN=LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/IR_FFT_without%20opamp.PNG" width="560"/>
                    <font size="2">
                    <figcaption> <b>Oscilloscope FFT of IR Sensor without augmentations</b>
                    </figcaption>
                    </font>
                </figure>
                <br/>
                The result is from turning the IR hat near the sensor. The signal strength appears to be pretty 
                strong as there are clearly readings at the 6kHz mark and all its harmonics. For the Arduino, 
                we used FFT library from Music Labs' FFT. With the library, we can check the intensity of a desired 
                frequency range to see if the it recieved any signals. We chose a 256 point FFT with a known ADC 
                sampling frequency of 38.5kHz. Therefore, each bin of the FFT has a frequency range of Fs/N or 
                around 150Hz per bin. Thus the 6.08kHz desired frequency is located at bin 40. Thus, all we have 
                to call is
                <br/>
                <code ALIGN=LEFT>fft_log_out[40];</code>
                <br/>
                to get our readings.
                </p>
                <h5>Upgraded Design</h5>
                <p ALIGN=LEFT>
                  The signal strength of the FFT at our desired bin was already strong but we wanted to implement 
                  noise filtering which means we need a filter. We also want to amplify the values in order to 
                  utilize all 10 bits of the ADC for a higher resolution reading. The Arduino Analog input can 
                  only take in voltage values from 0 to 5 volts which means that any the input voltage can’t be 
                  negative or higher than that which will result in cut off and possibly damaging the circuit. 
                  Thus, this is the resulting schematic:
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/schematic-Phototransistor%20with%20OpAmp.PNG" width="560"/>
                      <font size="2">
                      <figcaption> <b>Schematic of IR with OpAmp and bandpass filter</b>
                      </figcaption>
                      </font>
                  </figure>
                  <br/>
                  We opted with using a high pass filter to remove any DC bias inherent in the output of the sensor 
                  because the DC bias is already high at around 4v. We then amplified the filtered signal by a factor 
                  of 20 which can be adjusted as needed. The amplification seems like a good amount based on the 
                  detection strength of the IR sensor. After we amplified the signal, we ran the output through a 
                  low pass filter that removes any high frequency noise and harmonics. We chose the values of the 
                  capacitor and resistor such that the bandpass filter contains a lower cutoff frequency of 5.5kHz 
                  and higher cuttoff frequency of 6.5kHz. The formula to calculate the cutoff frequency is 1/(2*pi*RC). 
                  This completes our bandpass filter.
                </p>
                <h5>Testing</h5>
                <p ALIGN=LEFT>
                  For testing we started with unit tests by turning on the hat and holding it a certain distance from 
                  the phototransistor and check the output of the FFT printing to serial. We also implemented a blinking 
                  LED that would increase blinking rate as the IR gets closer to the phototransistor. The frequency of 
                  the blink rates tell us how close the hat is to the IR sensor. This tells us that the sensor is working 
                  as intended. In the video, the blinking is from the Arduino's internal LED although we should have used 
                  an external instead for demostration purposes.
                  <br/>
                  <iframe width="560" height="315" src="https://www.youtube.com/embed/_hD_c_GUQas?rel=0&amp;controls=0" 
                  frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                  <br/>
                  We also reedited the FFT library's codes to record FFT values in a single FFT cycle for better side by 
                  side comparison. Here are the results:
                  We divided the tests as such:
                  <ul ALIGN=LEFT>
                    <li> off: IR hat turned off
                    <li> far: IR hat 1.5 intersections away from sensor
                    <li> mid: IR hat 0.5 intersections away from sensor
                    <li> close: IR hat right next to sensor
                  </ul>
                  <br/>
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/IRnoOpAmp.PNG" width="560"/>
                      <font size="2">
                      <figcaption> <b>FFT of IR without Op Amp</b>
                      </figcaption>
                      </font>
                  </figure>
                  <br/>
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/IROpAmp.PNG" width="560"/>
                      <font size="2">
                      <figcaption> <b>FFT of IR with Op Amp</b>
                      </figcaption>
                      </font>
                  </figure>
                  <br/>
                  From these two comparisons, we can see that the op amp increases mid range performance of the IR sensor 
                  by detecting more of the IR hat's correct frequency signal whereas the harmonics appears to be more 
                  filtered out as a result of the installed bandpass filters. The long range performance appears to be 
                  unaffected by the augmentation and the close range performance clearly increased slightly.
                  <br/>
                  After testing that the sensor could detect the desired signal, we then tested the robustness of our 
                  filtering software and hardware by giving it decoy signals. We used a decoy IR signal at around 12kHz 
                  placed next to the sensor and read its FFT's. We also used the decoy to test our sensor for detecting 
                  different frequencies. 
                  <br/>
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/DecoyOpAmp.PNG" width="560"/>
                      <font size="2">
                      <figcaption> <b>FFT of Decoy </b>
                      </figcaption>
                      </font>
                  </figure>
                  <br/>
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/Decoy.PNG" width="560"/>
                      <font size="2">
                      <figcaption> <b>FFT of Decoy with Op Amp </b>
                      </figcaption>
                      </font>
                  </figure>
                  <br/>
                  We reached two conclusions with this test. The augmented sensor worked with different frequencies because 
                  the signal strengths were clearly amplified. Although for this test, it appears some of the noise were 
                  amplified as well but it was not significant. We also see that the 40th bin of the FFT is contains only 
                  background signals. This means that the signal strength will not be enough for the threshhold to detect 
                  a false positive. With these two tests, we proved that the IR sensor's hardware and software can detect 
                  the desired frequency amount and augmented it so that it detect farther away signals.  
                </p>
                <h3>Integration</h3>
                <p ALIGN=LEFT>
                  <figure ALIGN=LEFT>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab02/20181003_164149.jpg"
                      width="500"/>
                      <font size="2">
                      <figcaption> <b>The IR sensor and microphone together!</b>
                      </figcaption>
                      </font>
                  </figure>
                  <br/>
                  To integrate both the optical and the acoustic sensors, we first read input from the acoustic sensor 
                  through pin A0. Once we get a hit from the acoustic sensor, we switch to reading input from the IR sensor 
                  at pin A1. Both of these inputs rely on the same FFT function.
                  <br/>
                  <iframe width="560" height="315" src="https://www.youtube.com/embed/v4Z3QcfFZ4k?controls=0" frameborder="0" 
                  allow="autoplay; encrypted-media" allowfullscreen></iframe>
                  <br/>
                  In order to properly incorporate this, we have put in a 5-part finite state machine. The state starts. 
                  It then moves on to recording and running the FFT on the audio. Once we record the audio, we go to 
                  process it. If the bin containing 660Hz passes its intensity threshold (meaning we've detected the 
                  tone and we need to start), we start recording IR. If not, then we go back to recording audio. From 
                  here, we continue to recording and running the FFT on the IR. If the IR surpasses its threshold 
                  (meaning a robot is detected), it writes to the serial monitor and goes back to the start. Else, it 
                  keeps recording IR. 
                    
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>enum</span> states<span style='color:#0000ff; '>{</span>
    START<span style='color:#0000ff; '>,</span>
    AUDIO_FFT<span style='color:#0000ff; '>,</span>
    AUDIO_PROC<span style='color:#0000ff; '>,</span>
    IR_FFT<span style='color:#0000ff; '>,</span>
    IR_PROC
<span style='color:#0000ff; '>}</span><span style='color:#0000ff; '>;</span>
uint8_t state<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; font-weight:bold; '>void</span> loop<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>{</span>

    <span style='color:#0000ff; font-weight:bold; '>switch</span> <span style='color:#0000ff; '>(</span>state<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>   
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>START</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#008000; '>//check point</span>
            state <span style='color:#0000ff; '>=</span> AUDIO_FFT<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//next state</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>AUDIO_FFT</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            ADMUX <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0x40</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// use adc0</span>
            <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Some FFT array from ADC generating code....</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
            state <span style='color:#0000ff; '>=</span> AUDIO_PROC<span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>AUDIO_PROC</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Processing FFT result code and check threshhold...</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>past_some_threshhold<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
                state <span style='color:#0000ff; '>=</span> IR_PROC<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//past threshhold so we move on</span>
            <span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span><span style='color:#0000ff; '>{</span>
                state <span style='color:#0000ff; '>=</span> AUDIO_FFT<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//recalculate FFT with new samples</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>IR_FFT</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            ADMUX <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0x41</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// use adc1</span>
            <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Some FFT array from ADC generating code....</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
            state <span style='color:#0000ff; '>=</span> IR_PROC<span style='color:#0000ff; '>;</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>IR_PROC</span><span style='color:#e34adc; font-weight:bold; '>:</span>
            <span style='color:#008000; '>/*</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Processing FFT result code and check threshhold...</span>
<span style='color:#008000; '>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/</span>
            <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>past_some_threshhold<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
                state <span style='color:#0000ff; '>=</span> START<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//past threshhold so we move on</span>
            <span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span><span style='color:#0000ff; '>{</span>
                state <span style='color:#0000ff; '>=</span> IR_FFT<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//recalculate FFT with new samples</span>
            <span style='color:#0000ff; '>}</span>
            <span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>  
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 06:17:21 UTC -->
                 
                </p>
                <h3>Conclusion</h3>
                <p ALIGN=LEFT>
                  We were able to integrate both the IR and microphone sensors to a single code base. This step is 
                  important as we will need to integrate all of the code from the different modules we made into the 
                  arduino. Looking forward, we would like to increase the ranges of the microphone sensors and IR 
                  sensors such that they will be able to detect the correct freqencies from farther away. This is 
                  important since the IR is used to detect other robots and the microphone is used to start the robot. 
                  We also want to explore ways to schedule our code because the sensing is a hard real time process 
                  where we have to stop the robot if it is in danger of collision and thus, we must find a way to 
                  quickly calculate the FFT and then have the robot react quick enough. A likely solution will be 
                  to use interrupts.
                </p>
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 3 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-3">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Lab 3: System Integration and Radio Communication</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/lab3-bootstrap.png" alt="">
              <p class="mb-5">
                <h1>Objectives</h1>
<u1 ALIGN=LEFT>
<li>Design an efficient data scheme to store all maze information on an Arduino</li>
<li>Familiarize ourselves with Nordic radio transceivers and the RF24 Arduino library in order to communicate between radios on two different Arduinos and send maze information wirelessly
</li>
<li>Communicate with the GUI and update it from a wirelessly connected Arduino to display explored vs. unexplored areas of the maze
</li>
<li>Fully integrate all components onto the robot so it starts on a 660 Hz tone, explores the entire maze, stops if it sees another robot but ignores decoys, and displays maze information on the GUI via radio communication with the base station
</li>
</u1>

            <h1>Introduction</h1>
                <p>
                        For this lab we integrated all of the robot’s capabilities that we had previously implemented into a cohesive system that communicates wirelessly with the provided GUI.  We first worked on creating an algorithm that would efficiently store all the information our robot detects as it navigates through the maze.  Next, one subteam (Patrick and Chrissy) worked on adding the radio component to the robot, setting up the two Nordic nRF24L01+ transceivers that we would use to communicate wirelessly between two Arduinos, one on the robot and one on a base station connected to the GUI.  Meanwhile the other subteam (Tara and Xiaoyu) integrated all the robot’s other functionalities: starting on detection of a 660 Hz tone, line following, wall detection, and detection of other robots while ignoring decoys. At the end of the lab we combined all of the work so that the robot can autonomously explore the maze and update the GUI in real time.
                </p>
            <h1>Radio</h1>
                <p>For the radio portion of the lab we implemented two Nordic nRF24l01+ transceivers. To test out the connection between the two radios, we ran the example “GettingStarted” code on two separate Arduinos with radios attatched, ensuring proper communication. After that, we integrated other radios onto the "base station" (an Arduino connected to a computer) and the Arduino on the robot. Since the Arduino does have a 3.3V power supply, we needed to implement a 3.3V voltage regulator for each radio to step down to the appropriate power. This adjustment from our previous strategy, using  3.3V from a DC power supply, made the radios more portable.</p>
                <p>Coding the radio involved setting the correct pipes to send our messages through the radio. Our team was assigned pin values  <code>const uint64_t pipes[2] = { 0x0000000014LL, 0x0000000015LL };</code> to avoid conflicts with other teams' radios. The transmitter writes to pipe 0x14 while reading from pipe 0x15; the receiver reads and writes the other way around. The RF24 library abstracts many of the complexities of radio transmission so that we only need to call some prewritten functions to send messages with the radio.</p>
                <p>To transmit, we call <code>radio.write( &buff, sizeof(buff) )</code>, where the buffer can be an integer. </p>
                <p>After writing, the transmitter has the option to hear back from the receiver, as shown in the code shown below. This allows us to confirm that the radio has delivered its package correctly, as well as send feedback between the robot and the base station.</p>
                <p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>radio<span style='color:#0000ff; '>.</span>startListening<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
uint16_t buffer<span style='color:#0000ff; '>;</span> 
radio<span style='color:#0000ff; '>.</span>read<span style='color:#0000ff; '>(</span> <span style='color:#0000ff; '>&amp;</span>buffer<span style='color:#0000ff; '>,</span> <span style='color:#0000ff; font-weight:bold; '>sizeof</span><span style='color:#0000ff; '>(</span>buffer<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
radio<span style='color:#0000ff; '>.</span>stopListening<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 06:37:48 UTC -->
<!--DONT INDENT; that will ruin the formatting-->
                </p>
            <h3>Sending Maze Information Between Arduinos</h3>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/flzf6dUwdMM?controls=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                <h5>Data Structure</h5>
                
            <p>The two byte communication message that the robot sends to the base station is structured like this:</p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'> <span style='color:#800000; '>15</span>                  <span style='color:#800000; '>9</span> <span style='color:#800000; '>8</span>     <span style='color:#800000; '>7</span>    <span style='color:#800000; '>6</span> <span style='color:#800000; '>5</span>       <span style='color:#800000; '>3</span> <span style='color:#800000; '>2</span>       <span style='color:#800000; '>0</span>
<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span>
<span style='color:#0000ff; '>|</span> Reserved            <span style='color:#0000ff; '>|</span>ROBOT<span style='color:#0000ff; '>|</span>DIR   <span style='color:#0000ff; '>|</span>TREASURE <span style='color:#0000ff; '>|</span> WALLS   <span style='color:#0000ff; '>|</span>
<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 06:40:57 UTC -->
<p ALIGN=LEFT><code>[2:0]</code>  We reserve three bits for detecting walls. The position of the walls 
        will be relative to the robot. </p>    
        <style>
                table, th, td {
                    border: 1px solid rgb(7, 214, 24);
                }
            </style>        
<table>
            <tr>
                <th style="background-color: yellow">bits[2:0]</th>
                <th style="background-color: yellow">Wall Locations</th>
            </tr>
            <tr>
                <td>000</td>
                <td >left_wall, front_wall, right_wall = false</td>
            </tr>
            <tr>
                <td>001</td>
                <td>left_wall = true</td>
            </tr>
            <tr>
                <td>010</td>
                <td>front_wall = true</td>
            </tr>
            <tr>
                <td>011</td>
                <td>left_wall, front_wall = true</td>
            </tr>
            <tr>
                <td>100</td>
                <td>right_wall = true</td>
            </tr>
            <tr>
                <td>101</td>
                <td>left_wall, right_wall = true</td>
            </tr>
            <tr>
                <td>110</td>
                <td>left_wall, front_wall = true</td>
            </tr>
            <tr>
                <td>111</td>
                <td>left_wall, front_wall, right_wall = true</td>
            </tr>

            </table>

            <p ALIGN=LEFT><code>[5:3]</code>  We reserve three bits for the treasure since there will be three shapes and 
                    two colors, giving us four options, and we also need to define when there is no 
                    treasure. Total, we have five options.</p>

            <p ALIGN=LEFT><code>[7:6]</code>  The direction the robot has decided to take after hitting the                 intersection</p>
            
            <table>
                    <tr>
                        <th style="background-color: yellow">bits[7:6]</th>
                        <th style="background-color: yellow">Directions</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>forward</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>right</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>left</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>reverse</td>
                    </tr>
                    </table>
                <p ALIGN=LEFT><code>[8]</code>    Robot detection</p>
                <p ALIGN=LEFT><code>[9]</code>    Valid message</p>
                <p ALIGN=LEFT><code>[15:10]</code> Reserved for potentially later usage. Allows filled with zeros.</p>
            <p>The one byte communication message that the base station sends back to the robot is structured like this:</p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'> <span style='color:#800000; '>7</span>           <span style='color:#800000; '>4</span> <span style='color:#800000; '>3</span>          <span style='color:#800000; '>0</span>
<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span>
<span style='color:#0000ff; '>|</span>Reserved     <span style='color:#0000ff; '>|</span> EXPLORED   <span style='color:#0000ff; '>|</span>
<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 06:56:30 UTC -->
        
<p ALIGN=LEFT><code>[3:0]</code>  Three bits for whether the relative locations next to the robot has 
        been explored or not</p>
        <p ALIGN=LEFT><code>[7:4]</code>  Reserved for later usage. Allows filled with zeros</p>
        <p>The message sent back to the robot allows the robot to make decisions based on the state of the maze. The robot can make decisions based on whether the locations near it have been explored or not. This can affect which direction the robot turns in an intersection. This comes at a cost of implementing additional decoders for the robot on the system.</p>
       

        <h3>Simulating the Robot</h3>
        <p>To simulate the robot on the base station, we take the information that the robot sends and structure it into a format that the GUI can pick up.</p>
        
        <h3>Base Station-to-GUI Transmission</h3>
<p>We simulated the base station to GUI transmission by using print statements in the base station. The base station receives messages from the robot and decodes the message with the absolute directions in North, West, East, and South. The base station also prints out any detected treasures. The base station uses both the robot's wall sensor values and the direction the robot decides to go to determine the next square where the robot will be. Then it uses the robot's facing direction to figure out the absolute position on the maze. We always start our maze with the robot facing 'right'. As the robot moves through the maze, we update the GUI one intersection at a time. </p>

<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>byte <span style='color:#0000ff; '>*</span> decoder<span style='color:#0000ff; '>(</span>uint16_t input<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
    byte wforward  <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>input<span style='color:#0000ff; '>></span><span style='color:#0000ff; '>></span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x0001</span><span style='color:#0000ff; '>;</span>
    byte wright <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>input <span style='color:#0000ff; '>></span><span style='color:#0000ff; '>></span> <span style='color:#800000; '>2</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x0001</span><span style='color:#0000ff; '>;</span>
    byte wleft <span style='color:#0000ff; '>=</span> input <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x0001</span><span style='color:#0000ff; '>;</span>
    byte robot <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>input <span style='color:#0000ff; '>></span><span style='color:#0000ff; '>></span> <span style='color:#800000; '>8</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x0001</span><span style='color:#0000ff; '>;</span>
    byte dir <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>unsigned</span><span style='color:#0000ff; '>)</span>input <span style='color:#0000ff; '>></span><span style='color:#0000ff; '>></span> <span style='color:#800000; '>6</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x0003</span><span style='color:#0000ff; '>;</span>
    byte treasure <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>input <span style='color:#0000ff; '>></span><span style='color:#0000ff; '>></span> <span style='color:#800000; '>3</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span> <span style='color:#800000; '>0x0007</span><span style='color:#0000ff; '>;</span>
    byte output<span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>{</span>wleft<span style='color:#0000ff; '>,</span> wright<span style='color:#0000ff; '>,</span> wforward<span style='color:#0000ff; '>,</span> robot<span style='color:#0000ff; '>,</span> treasure<span style='color:#0000ff; '>,</span> dir<span style='color:#0000ff; '>}</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>return</span> output<span style='color:#0000ff; '>;</span> 
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 07:20:15 UTC -->
<p>This is the decoder we used to get all the necessary values. We use the wall directions in combination with the direction the robot decided to take to update the robot's position on the maze for the GUI.</p>
<p>To update the robot's absolute position in the maze, we use the direction the robot is facing and where the robot decide go towards in the intersection to up date the robot.</p>
<p>Code snippet for updating the maze locations.</p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>case </span><span style='color:#808080; font-weight:bold; '>forward</span><span style='color:#e34adc; font-weight:bold; '>:</span> <span style='color:#008000; '>//forward : robot decided to go forward</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>robot_direction<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>right<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
        x<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>robot_direction<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>left<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
        x<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>robot_direction<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>up<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
        y<span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>robot_direction<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>down<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
        y<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
<span style='color:#0000ff; font-weight:bold; '>break</span><span style='color:#0000ff; '>;</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 07:21:17 UTC -->
<p>Once the logic is set in place, we print the required values to the monitor so that the GUI can pick it up. We call ```python main.py COM# --rows 3 --cols 2``` for a 3x2 maze</p>

<figure>
        <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab03/maze.PNG" width="400"/>
        <font size="2">
        <figcaption> <b> GUI of the 3x2 Maze </b>
        </figcaption>
        </font>
    </figure>
<p>There is a missing wall that the robot hasn't explored  wall yet because the robot starts facing away from the wall.</p>
<h1>Robot Integration</h1>
<p>The robot subteam’s task was to integrate all the pieces we’ve been working on into one cohesive system. A fair amount of this had already been completed for Milestone 2. What remained was to add the functionality to starting at a 660 Hz tone, as well as sending signals between radios to the base station. We also had to integrate all the necessary hardware onto the robot.</p>
<figure>
        <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab03/IMG_0386.jpg" width="500"/>
        <font size="2">
        <figcaption> <b> Adding the Radio to the Robot </b>
        </figcaption>
        </font>
    </figure>              

<h3>Robot State Machine</h3>
<figure>
        <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab03/FSM.PNG" width="500"/>
        <font size="2">
        <figcaption> <b> State Machine for the Robot </b>
        </figcaption>
        </font>
    </figure>

<h3>Integration with Mic</h3>
<p>In order to make the robot start exploring the maze when we play the 660Hz tone, as it will in the actual competition, we added the audio portion of lab 2 onto the robot. We moved the circuitry and microphone onto the robot’s breadboard and connected the output signal to the Arduino.</p>
<p>We had previously been having trouble with the range of our 660Hz tone detection -- the microphone was only able to distinguish it from background noise when we played the tone from our phone's speaker about an inch away. We learned that if we unplugged the power from our wall sensors our results improved significantly, presumably because this gave more power to the microphone and allowed it to better pick up audio signals. To solve this problem, we decided to move the microphone power to the arduino, while keeping the wall sensor power on the main breadboard circuit powered by the battery.</p>

<h3>Robot Navigation through the maze</h3>
<p>Since we had already implemented a left-wall-following rule in milestone 2, our navigation implementation was already complete, and we did not have to change any of our code involving our wall and line sensors or turning conditionals. </p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/zy4pa3PNozo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/yrcaZHm1hLk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3>Integration with Radio</h3>
<p>For the integration with the radio, we decided to do most of the decoding and data processing on the base station and off the robot system because we are already running low on memory and we can delegate some of the maze processing to the base station and have it send back a response. The robot only needs to send the readings from its wall sensors, treasure detection, and direction it intents to move. The base station will take the data and come up with absolute coordinates and wall locations based on robots previous locations. The base station can then update the GUI accordingly.</p>

<h1>Conclusion</h1>
<p>Overall, Lab 3 proved to be quite a challenge. We learned a lot about wireless communication, bit optimization, and integration and testing. With the addition of new components, we needed to better optimize the circuit layout on our robot and the power supplies for each component. Through the <i>frustration</i> of component faults and other issues, we’ve learned how to better debug our problems.</p>

</p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 4 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-4">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Lab 4: FPGA and Camera</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/lab4-bootstrap.png" alt="">
              <p class="mb-5" ALIGN=LEFT>
                <h1>Objectives</h1>
                <ul ALIGN=LEFT>
                  <li> Use a camera and FPGA to implement a system for detecting treasures
                  <li> Develop an FPGA module capable of detecting shapes and colors from a camera input
                  <li> Communicate treasure detection from the FPGA to the Arduino
                  <li> Display images from the camera onto a screen
                </ul>
              </p>
              <h1>Introduction</h1>
              <p ALIGN=LEFT>
                For this lab we began working with an FPGA to implement treasure-detection capabilities
                for the robot. The system consists of an FPGA, a camera, and an Arduino. To divide the
                work for this lab, Patrick and Chrissy worked with the FPGA, and Xiaoyu and Tara worked
                with the Arduino. The FPGA team worked on implementing PLL, downsampler, and image 
                processor modules in Verilog for the FPGA, and the Arduino team worked on writing to 
                appropriate registers in the camera in order to set it up properly for taking images. 
                The two teams then came together to integrate the components to take image input from 
                the camera, send the images to the memory of the FPGA and process the image to detect 
                shape and color, and then send treasure information from the FPGA to the Arduino so that 
                the robot can finally send that information back to the base station.
              </p>
              <h1>FPGA</h1>
              <p ALIGN=LEFT>
                First, we implemented a phase-locked loop to clock the FPGA. 
                Using the provided Verliog project, we set up the interface our system would use for shape detection.
            <h3>Setup</h3>
            <p ALIGN=LEFT>
                We first use the PLL, which is not suceptible to clock skew, to produce different clocks
                to drive the camera, VGA, M9k block memory read and write. We use the 24 MHz clock to drive 
                the camera and plug that as XCLK. We use the 50 MHz clock for memory write and 25 MHz clock 
                for read. We want write to be faster than read because writing to the block needs to be done 
                before we read. We don't want to accidentally read blocks before they are updated. We also 
                use the 25 MHz clock for VGA display.</p>
                <h3>Camera, FPGA and Arduino Communication</h3>
                <p ALIGN=LEFT>
                The camera contains 20 pins total. We have 8 pins for parallel data which sends one of the two 
                bytes for pixel during each clcok cycle. These eight pins are connected to input GPIO pins on 
                the FPGA. In addition, we also have HREF and VSYNC pins which are also connected as input to the 
                FPGA. The camera also has PCLK and XCLK pins. The XCLK is for external clock. We use an output pin 
                from the FPGA and put it to the camera. The PCLK is camera clock; we route that back to the FPGA for analysis. </p>
                <figure ALIGN=CENTER>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/schematic.PNG" 
                    width="560"/>
                    <font size="2">
                    <figcaption> <b> Wiring Diagram for FPGA, Arduino Uno, and Camera </b>
                    </figcaption>
                    </font>
                </figure>
                <p ALIGN=LEFT>In the figure above, the colored rectangles mean that the pins are wired together.</p>
<p ALIGN=LEFT>In the FPGA, we must set the camera communication pins, HREF, VSYNC, and PCLK to 
        input for the FPGA. We set the the communication pins with the Arduino as output. 
        In quartus, this is done as follows:</p>
                
<pre ALIGH=LEFT style='color:#000000;background:#ffffff;'><span style='color:#008000; '>//////////// GPIO_0, GPIO_0 connect to GPIO Default //////////</span>
<span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>output</span> 		    <span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>[33:0]</span>		<span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>GPIO_0_D;</span>
<span style='color:#008000; '>//////////// GPIO_0, GPIO_1 connect to GPIO Default //////////</span>
<span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>input</span> 		    <span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>[33:20]</span>		<span style='color:#ffffff; background:#dd0000; font-weight:bold; font-style:italic; '>GPIO_1_D;</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:39:29 UTC -->
                <p ALIGN=LEFT>We also use four parallel wires for communication from FPGA to the Arduino. We have 
                two bits for treasure shape and two bits for color.</p>
                <h5>Polling from camera</h5>
                <figure ALIGN=CENTER>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/vgatiming.PNG" 
                    width="500"/>
                    <font size="2">
                    <figcaption> <b> Timing Diagram for the OV7670 camera </b>
                    </figcaption>
                    </font>
                </figure>
                <p ALIGN=LEFT>
                The above timing diagram shows us how images from the camera are sent. When we have
                a new frame incoming, the VSYNC goes high. After some time, the HREF will go high, 
                signalling the start of the first byte of data. The camera can send data in RGB565 
                which is 5 bits of red, 6 bits of green, and 5 bits of blue color. This is divided 
                into two transmissions due to the camera's one byte communication line. When the HREF 
                goes high, the camera is transmitting the data for the first row of data. A low HREF 
                means that we finished transmitting data for one row. At this point, the VSYNC can go 
                high to signal the end of the image or the HREF can go high again when the camera is 
                sending data for the next row of pixels.</p>
                <figure ALIGN=CENTER>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/cam_fsm.PNG" 
                    width="560"/>
                    <font size="2">
                    <figcaption> <b> FSM for getting data from camera </b>
                    </figcaption>
                    </font>
                </figure>
                Based on the timing diagram, we created this state machine to model the behavior of the camera transmissions.
                <table ALIGN=CENTER>
                  <tr>
                    <th style="background-color: yellow">States</th>
                    <th style="background-color: yellow">Function</th>
                  </tr>
                  <tr>
                    <td>IDLE</td>
                    <td>Start of device. We wait here for camera to start</td>
                  </tr>
                  <tr>
                    <td>NEW FRAME</td>
                    <td>Start of new frame where we reset the X and Y address</td>
                  </tr>
                  <tr>
                    <td>POLL</td>
                    <td>Enable to downsampler and poll from camera</td>
                  </tr>
                  <tr>
                    <td>UPDATE ROW</td>
                    <td>New row of pixels. Update Y address and reset X address<td>
                  </tr>
                  <tr>
                    <td>WAIT</td>
                    <td>Wait for start of next frame or row</td>
                  </tr>
                </table>
                <p ALIGN = LEFT>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>always @<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>*</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    <span style='color:#0000ff; font-weight:bold; '>case</span> <span style='color:#0000ff; '>(</span>control_state<span style='color:#0000ff; '>)</span>
        STATE_IDLE<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            W_EN                <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
            down_sample_reset   <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_NEW_FRAME<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            down_sample_reset   <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span> 
            W_EN                <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> downsampler_rdy <span style='color:#0000ff; '>?</span> <span style='color:#800000; '>1</span>'b1 <span style='color:#0000ff; '>:</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_POLL<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            down_sample_reset   <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
            W_EN                <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> downsampler_rdy <span style='color:#0000ff; '>?</span> <span style='color:#800000; '>1</span>'b1 <span style='color:#0000ff; '>:</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_UPDATE_ROW<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            down_sample_reset   <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
            W_EN                <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_WAIT<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            down_sample_reset   <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
            W_EN                <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        default<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            W_EN                <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
            down_sample_reset   <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
    endcase
<span style='color:#0000ff; font-weight:bold; '>end</span>

always @<span style='color:#0000ff; '>(</span>posedge pclk<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
<span style='color:#0000ff; font-weight:bold; '>case</span> <span style='color:#0000ff; '>(</span>control_state<span style='color:#0000ff; '>)</span>
        STATE_IDLE<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_NEW_FRAME<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
            X_ADDR          <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>15</span>'b0<span style='color:#0000ff; '>;</span>
            Y_ADDR          <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>15</span>'b0<span style='color:#0000ff; '>;</span>

        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_POLL<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    <span style='color:#0000ff; '>/</span><span style='color:#0000ff; '>/</span>increments xaddr <span style='color:#0000ff; font-weight:bold; '>after</span> downsampler 
            <span style='color:#0000ff; '>/</span><span style='color:#0000ff; '>/</span>finishes <span style='color:#0000ff; font-weight:bold; '>and</span> writes <span style='color:#0000ff; font-weight:bold; '>to</span> mem
            X_ADDR <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> downsampler_rdy <span style='color:#0000ff; '>?</span> X_ADDR <span style='color:#0000ff; '>+</span> <span style='color:#800000; '>1</span> <span style='color:#0000ff; '>:</span> X_ADDR<span style='color:#0000ff; '>;</span> 

        <span style='color:#0000ff; font-weight:bold; '>end</span>

        STATE_UPDATE_ROW<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    Y_ADDR			<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> Y_ADDR <span style='color:#0000ff; '>+</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
            X_ADDR          <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>15</span>'b0<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        STATE_WAIT<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>

        <span style='color:#0000ff; font-weight:bold; '>end</span>
        default<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>

        <span style='color:#0000ff; font-weight:bold; '>end</span>
    endcase
<span style='color:#0000ff; font-weight:bold; '>end</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:42:18 UTC -->
                </p>
                <p ALIGN=LEFT>We must save the data from the camera into a memory location 
                so that it can be read by the VGA and the image processor 
                later for analysis. This is done with two variables, X_ADDR and Y_ADDR. </p>
                <figure ALIGN=CENTER>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/IMG_1174.jpg" width="560"/>
                    <font size="2">
                    <figcaption> <b> Camera Connection to FPGA </b>
                    </figcaption>
                    </font>
                </figure>
                <h5>Downsampler</h5>
                  The camera's eight parallel data pins output color per pixel at a clocked 
                  rate. For RGB, it uses the configuration for RGB565 or RGB555. Both 
                  configurations are two bytes in length total which means that each pixel 
                  captured by the camera are two bytes. We must downsample the two byte data 
                  from the camera to 1 byte data because of memory constraints on the M9k
                  memory blocks on the FPGA. We can only store one byte of data per memory 
                  address. Thus we must convert to RGB332 or RGB323. We used RGB332 for 
                  debugging and displaying the camera data on the VGA screen since the VGA 
                  only takes in RGB332 values. For treasure detection, we changed to RGB323 
                  to get more bits out of the blue pixel since we are only detecting blue and 
                  red treasures. The goal of the downsampler is to take the two byte pixel 
                  from the camera and converted it to a one byte pixel. This one byte pixel 
                  will be saved into the M9k memory block at the correct memory address which 
                  is relative to the pixel location on the screen. 
                  <figure>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/timingdiagram565.PNG" width="560"/>
                      <font size="2">
                      <figcaption> <b> Timing Diagram for Outputing RGB565 </b>
                      </figcaption>
                      </font>
                  </figure>
                  <table ALIGN=CENTER>
                    <tr>
                      <th style="background-color: yellow">States</th>
                      <th style="background-color: yellow">Function</th>
                    </tr>
                    <tr>
                      <td>IDLE</td>
                      <td>Start of device. We wait here for camera to start</td>
                    </tr>
                    <tr>
                      <td>READ</td>
                      <td>Start reading from camera</td>
                    </tr>
                  </table>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>READ<span style='color:#0000ff; '>:</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
fsm 		<span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>VSYNC <span style='color:#0000ff; '>|</span><span style='color:#0000ff; '>|</span> RES<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>?</span> IDLE <span style='color:#0000ff; '>:</span> READ<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>HREF<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    count_bit 		<span style='color:#0000ff; '>=</span> ~count_bit<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>count_bit<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        reg_valid		<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>OUT</span>[<span style='color:#800000; '>7</span><span style='color:#0000ff; '>:</span><span style='color:#800000; '>2</span>]		<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> {D[<span style='color:#800000; '>7</span><span style='color:#0000ff; '>:</span><span style='color:#800000; '>5</span>]<span style='color:#0000ff; '>,</span> D[<span style='color:#800000; '>2</span><span style='color:#0000ff; '>:</span><span style='color:#800000; '>0</span>]}<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>begin</span> 
        reg_valid 		<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>OUT</span>[<span style='color:#800000; '>1</span><span style='color:#0000ff; '>:</span><span style='color:#800000; '>0</span>]	        <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> D[<span style='color:#800000; '>4</span><span style='color:#0000ff; '>:</span><span style='color:#800000; '>3</span>]<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
<span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    count_bit	        <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
    reg_valid 	        <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>OUT</span>			<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>8</span>'d7<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:44:11 UTC -->
                  <h5>Color Bar</h5>
                  <p ALIGN=LEFT>
                  To display the color bar, we must set the appropriate registers 
                  in the Camera. The main registers involved are COM 7 and COM 17 
                  for color bar enable and color bar DSP enable. With the downsampler 
                  above, we are able to decode the bytes coming from the camera and 
                  display the color bar onto the VGA screen. The downsampler takes 
                  in input from the camera.</p>
                  <figure>
                      <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/IMG_1163.jpg" width="560"/>
                      <font size="2">
                      <figcaption> <b> Color Bar Test </b>
                      </figcaption>
                      </font>
                  </figure>
                  <p ALIGN=LEFT>
                  The colors in the bar are different from the example in the lab but when 
                  we use the camera to capture, we found that the colors were passable and 
                  would not pose an issue.</p>
                  <h5>Display Camera Capture</h5>
                  <p ALIGN=LEFT>To display the images captured by the camera, we must set the registers from
                  the Arduino. We can disable the DSP for color bar and the color bar test itself. 
                  The FPGA code is exactly the same.</p>
                  <iframe width="560" height="315" src="https://www.youtube.com/embed/0lKN7Tkrx0Q?controls=0" 
                  frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; 
                  picture-in-picture" allowfullscreen></iframe>
                  <h3>Color Detection</h3>
                  <p ALIGN=LEFT>
                  For color detection, we use a module call the Image Processor. The image processor 
                  samples at the same rate as the VGA board at 25 MHz. We set a boundary within the 
                  resolution of each image and then count the amount of blue and red in each pixel. </p>
              </p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>always @<span style='color:#0000ff; '>(</span>posedge CLK<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>

<span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>VGA_PIXEL_Y <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>=</span><span style='color:#800000; '>20</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    blueCount  <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    redCount   <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    greenCount <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    done_color <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b0<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
else if <span style='color:#0000ff; '>(</span>VGA_PIXEL_X <span style='color:#0000ff; '>></span> `X_LOW_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_X <span style='color:#0000ff; '>&lt;</span> 
    `X_HIGH_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>></span> `Y_LOW_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>&lt;</span> 
    `Y_HIGH_THRESH<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    blueCount <span style='color:#0000ff; '>=</span> blueCount <span style='color:#0000ff; '>+</span> blue<span style='color:#0000ff; '>;</span>
    redCount  <span style='color:#0000ff; '>=</span> redCount  <span style='color:#0000ff; '>+</span> red<span style='color:#0000ff; '>;</span>
    greenCount <span style='color:#0000ff; '>=</span> greenCount <span style='color:#0000ff; '>+</span> green<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
else if<span style='color:#0000ff; '>(</span>VGA_PIXEL_Y <span style='color:#0000ff; '>></span><span style='color:#0000ff; '>=</span> `Y_HIGH_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> !done_color<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>greenCount <span style='color:#0000ff; '>></span> <span style='color:#800000; '>15</span>'d5000 <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> blueCount <span style='color:#0000ff; '>></span> <span style='color:#800000; '>15</span>'d20000 <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> 
        redCount <span style='color:#0000ff; '>></span> <span style='color:#800000; '>15</span>'d20000<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    color <span style='color:#0000ff; '>=</span> NONE<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    else if <span style='color:#0000ff; '>(</span>blueCount <span style='color:#0000ff; '>></span> redCount <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>blueCount <span style='color:#0000ff; '>-</span> redCount<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>30</span>
        <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> blueCount <span style='color:#0000ff; '>></span> <span style='color:#800000; '>15</span>'d200<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    color <span style='color:#0000ff; '>=</span> BLUE<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    else if <span style='color:#0000ff; '>(</span>redCount <span style='color:#0000ff; '>></span> blueCount <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>redCount <span style='color:#0000ff; '>-</span> blueCount<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> <span style='color:#800000; '>30</span> 
        <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> redCount <span style='color:#0000ff; '>></span> <span style='color:#800000; '>15</span>'d200<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    color <span style='color:#0000ff; '>=</span> RED<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    color <span style='color:#0000ff; '>=</span> NONE<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    blueCount <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    redCount  <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    greenCount <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
    done_color <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
<span style='color:#0000ff; font-weight:bold; '>end</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:45:56 UTC -->
                <iframe width="560" height="315" src="https://www.youtube.com/embed/nbeuPRgot2Y?controls=0" 
                        frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
                <p ALIGN=LEFT>This implementation use a lot of variables. We needed a counter 
                        for the three colors. We used the counter to count the values of 
                        the blue and red pixels if they are within a set of boundary. 
                        The boundary was used as a filter so that we can get the values 
                        that are near the center of the camera screen since that was where 
                        the shapes are most likely going to be. We judge as soon as the VGA X 
                        and Y axis exit the high threshold which means that we are approaching 
                        the end of our image. As shown above, we compare the counters of red
                        and blue pixels and see if one is greater than the other by some threshold. 
                        We need the green counter because if the green counter is high while
                        red and blue are also high, it likely means that we are viewing a 
                        white wall since there are no green color shapes. The judging only 
                        occurs once which was done by a flipping bit. We also reset the counters 
                        for the next frame. </p>
                
                <figure>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/IMG_1171.jpg" width="500"/>
                    <font size="2">
                    <figcaption> <b> Overview of FPGA and Camera </b>
                    </figcaption>
                    </font>
                </figure>
                <h1>Arduino</h1>
                <h3>Disabling Arduino's Internal Pullup Resistor</h3>
                <p ALIGN=LEFT>In the prelab, we determined what registers we needed to set and what values 
                        we needed to set them to in order to properly set up the camera to do what we need 
                        it to. Before starting anything, we disabled the internal pullup resistors in the 
                        Arduino’s I2C interface so as not to damage the camera by sending 5V to it. We 
                        then downloaded the provided Lab 4 Arduino template in order to use the functions 
                        provided in it to write to and read from registers in the camera.
                        This is done by going to the Arduino library on our hard drive. This is done by going 
                        to <i>twi.c</i> at <i>C:\Program Files (x86)\Arduino\hardware\arduino\avr\libraries\Wire\src\utility</i>
                        and commenting out</p>
                
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#008000; '>//activate internal pullups for twi</span>
digitalWrite<span style='color:#0000ff; '>(</span>SDA<span style='color:#0000ff; '>,</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
digitalWrite<span style='color:#0000ff; '>(</span>SCL<span style='color:#0000ff; '>,</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:56:36 UTC -->
<p ALIGN=LEFT>This will allow the I2C interface to communicate with the camera without sending 5v to the camera.</p>                

                <h3>Writing Registers</h3>
                <p ALIGN=LEFT>
                        We use the I2C communication protocol to talk to the camera. This is setup using Arduino's 
                        <i>Wire</i> library which supports I2C interfaces. We set up the Arduino as the master and the camera 
                        as slave. The camera has a set slave address of 0x21 after we ignore the least significant bit 
                        because that is used to distinguish between read and writes. The *Wire* library already set this 
                        up for us. All we have to do is pass the upper seven bits of the slave address of the camera to 
                        the I2C interface. We write to the camera by calling:
                </p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>Wire<span style='color:#0000ff; '>.</span>beginTransmission<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x21</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>// 7-bit Slave address</span>
Wire<span style='color:#0000ff; '>.</span>write<span style='color:#0000ff; '>(</span>value_to_write<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>   
Wire<span style='color:#0000ff; '>.</span>endTransmission<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:58:08 UTC -->
                The library makes it super simple to communicate with the camera using I2C.
          <p ALIGN=LEFT>To have the camera capture the images we want, we must set some registers on the camera that deal with resolution, 
                and camera clock. The following shows how we wrote to the registers:</p>
                
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>void</span> setup<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>{</span>
    Wire<span style='color:#0000ff; '>.</span>begin<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>begin<span style='color:#0000ff; '>(</span><span style='color:#800000; '>9600</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    delay<span style='color:#0000ff; '>(</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x12</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0x80</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>  
    <span style='color:#008000; '>//color bar test</span>
    <span style='color:#008000; '>//  Serial.println(OV7670_write_register(0x12,0x0E)); </span>
    <span style='color:#008000; '>//  Serial.println(OV7670_write_register(0x42,0x08));</span>

    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x12</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0x0c</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x0c</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0x08</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x14</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0x11</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x40</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0xD0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x11</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0xC0</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span>OV7670_write_register<span style='color:#0000ff; '>(</span><span style='color:#800000; '>0x1E</span><span style='color:#0000ff; '>,</span><span style='color:#800000; '>0x30</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    set_color_matrix<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 19:59:03 UTC -->
                <table ALIGN=CENTER>
                  <tr>
                    <th style="background-color: yellow">Registers</th>
                    <th style="background-color: yellow">Name</th>
                    <th style="background-color: yellow">Function</th>
                  </tr>
                  <tr>
                    <td>0x12</td>
                    <td>COM7</td>
                    <td>Reset regs; enable/disable color bar test; sets QCIF 176x144 resolution</td>
                  </tr>
                  <tr>
                    <td>0x0c</td>
                    <td>COM3</td>
                    <td>Enable scaling</td>
                  </tr>
                  <tr>
                    <td>0x14</td>
                    <td>COM9</td>
                    <td>Auto gain ceiling 2x; Freeze AGC/AEC</td>
                  </tr>
                  <tr>
                    <td>0x40</td>
                    <td>COM15</td>
                    <td>Max output range [00] to [FF]; Use RGB 565</td>
                  </tr>
                  <tr>
                    <td>0x42</td>
                    <td>COM17</td>
                    <td>DSP color bar enable</td>
                  </tr>
                  <tr>
                    <td>0x11</td>
                    <td>CLKRC</td>
                    <td>Use 24 MHz clk from FPGA; pclk can be as high as xclk</td>
                  </tr>
                  <tr>
                    <td>0x1E</td>
                    <td>MVFP</td>
                    <td>flip and mirror image</td>
                  </tr>
                </table>
                <p ALIGN=LEFT> We set the camera to QCIF resolution which is 176 x 144 screen size. 
                        This is the smallest resolution the camera supports. We use this
                        resolution because we lack memory to store any larger sizes on 
                        the FPGA. For the first part of the lab, we tested the camera 
                        and our FPGA polling code by using the camera color bar to make 
                        sure we can display the correct colors on the VGA screen. This
                        means we have to set COM7 to display the color bar and enable 
                        DSP color bar in COM 17. The other important setting is the 
                        camera clock. This camera clock determines the rate a which each 
                        pixel is sent to the FPGA. We drive the camera with the 24 MHz 
                        FPGA clock. This gives the camera the ability to go up to 24 MHz
                        for pixel transmissions.</p>
               
                <figure>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/lab04/IMG_1172.jpg" width="560"/>
                    <font size="2">
                    <figcaption> <b> Setup of the Arduino and FPGA </b>
                    </figcaption>
                    </font>
                </figure>
                <h3>Communicating with FPGA</h3>
                <p ALIGN=LEFT>
                        Communication with the FPGA is done by wiring the GPIO pins on the 
                        FPGA to the arduino in parallel. We use combinational logic in this 
                        case since we set the FPGA to output the results of the image 
                        processing immediately while having the Arduino constantly decode
                        the message for the four pins. Even though the voltage of the 
                        Arduino pins are 5V while FPGA pins are 3.3V, we can connect 
                        the pins together without a voltage divider because the Arduino 
                        pins are set as input and are capable of reading the 3.3V from 
                        the FPGA as high.
                </p>
                
          <p ALIGN=LEFT>
                Initially, we define the input communication pins on the Arduino 
                and the decoding treasure numbers.
          </p>
                
          
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>define T1 <span style='color:#800000; '>3</span>   <span style='color:#008000; '>//GPIO 33 treasure[0]</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> T2 4   </span><span style='color:#008000; '>//GPIO 32 treasure[1]</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> C1  5  </span><span style='color:#008000; '>//GPIO 31 color ; blue or red</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> C2  6  </span><span style='color:#008000; '>//GPIO 30 color ; blue or red</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> RED 2</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BLUE 1</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> NONE 0</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> SQUARE 2</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> TRIANGLE 1</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> DIAMOND 3</span>

uint8_t decoder<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
    uint8_t treasure1 <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>T1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//read from pins</span>
    uint8_t treasure2 <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>T2<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
    uint16_t color1   <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>C1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    uint16_t color2   <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>C2<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>T1: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span>treasure1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> T2: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span>treasure2<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> C1: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span>color1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> C2: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span>color2<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    uint8_t treasure  <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>treasure2 <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>|</span>treasure1<span style='color:#0000ff; '>;</span> 
    <span style='color:#008000; '>//combine treasure bits</span>
    uint8_t color   <span style='color:#0000ff; '>=</span>   <span style='color:#0000ff; '>(</span>color2<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>|</span><span style='color:#0000ff; '>(</span>color1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>---COLOR: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>color<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>BLUE<span style='color:#0000ff; '>)</span> Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>BLUE</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>color<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>RED<span style='color:#0000ff; '>)</span>    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>RED</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span>             Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>NONE</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span> <span style='color:#0000e6; '>"</span><span style='color:#0000e6; '> Treasure: </span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span> treasure <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> SQUARE<span style='color:#0000ff; '>)</span>
        Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>SQUARE</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span> treasure <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> TRIANGLE<span style='color:#0000ff; '>)</span>
        Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>TRIANGLE</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span> treasure <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> DIAMOND<span style='color:#0000ff; '>)</span>
        Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>DIAMOND</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span>
        Serial<span style='color:#0000ff; '>.</span>print<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>NONE</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    Serial<span style='color:#0000ff; '>.</span>println<span style='color:#0000ff; '>(</span><span style='color:#0000e6; '>"</span><span style='color:#0000e6; '>"</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 20:01:09 UTC -->
<p ALIGN=LEFT>
        This code is the decoder for communication from the FPGA. 
        The code is very simple because of the extra hardware used. 
        With this method, we used up to four pins from the Arudino. 
        We could have used a serial communication protocol using two 
        pins to send the four bits of messages but we have extra pins 
        from the Arduino left over so simplicity at the cost of 
        hardware was prioritized.
</p>
                
                <h1>Conclusion</h1>
                <p ALIGN=LEFT>
                        This lab is one of the harder labs this semester. Getting the camera to 
                        display an image correctly was a challenge due to the complexities in timing 
                        the camera pixel transmission correctly. While getting the image itself wasn't 
                        too difficult to display, getting the right colors for the image was difficult.
                        We often had inverted colors or colors that were too dark or faded displaying 
                        on the screen. Both hardware and software contributed to the difficulty. We had 
                        to set the software to poll the bytes from the camera correctly but also had 
                        to ensure sure we wired the camera to the FPGA in a way that wouldn't introduce 
                        noise, especially with a 24 MHz clock driving the transmission. Looking forward, 
                        we will be integrating the FPGA camera system into our robot. This will likely 
                        result in more states and updates to our radio messages to support communicating 
                        treasure shapes and colors. We also will need to update the basestation so that 
                        it can receive messages from the radio.
                </p>
                
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 5 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-5">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Milestone 1: Line Follower</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/milestone1.gif" alt="">
              <p class="mb-5">
                <h3>Introduction</h3>
                  <p ALIGN=LEFT>
                    The goal of this milestone was to implement line-following functionality
                    to enable our robot to both follow a straight line and trace a figure-eight 
                    pattern. To accomplish this task, we added IR sensors to the robot and 
                    implemented code for it to follow the lines and turn as directed at intersections.
                  </p>
                <h3>Hardware Upgrades</h3>
                  <p ALIGN=LEFT>
                    We spent a large amount of lab time changing the structure of the robot chassis.
                    The goal is to build a good foundation for the robot structure so that we have enough space
                    and organization later on as the robot becomes more complex.
                  </p>
                <h5>Chassis Upgrade</h5>
                  <p ALIGN=LEFT>
                    We added a second level to the robot’s chassis to support our battery, the arduino, 
                    and a breadboard for our circuits. This second level allows us to mount the battery in a secure 
                    place and creates room for additions. The spaces between the two levels can also be used to store 
                    wiring for future additional sensors and circuitry.
                  </p>
                  <figure ALIGN=LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180910_213436.jpg" width="560"/>
                    <font size="3">
                    <figcaption> <b>Front View of Robot after Adding a Second Level</b>
                    </figcaption>
                    </font>
                  </figure>
                  <figure ALIGN=LEFT>
                    <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180910_213510.jpg" width="560"/>
                    <font size="3">
                    <figcaption> <b>Top View of Updated Chassis</b>
                    </figcaption>
                    </font>
                  </figure>
                <h5>Robot with Breadboard on Top</h5>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180913_204623.jpg" width = "560"/>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180913_204628.jpg" width = "560"/>
                <p ALIGN=LEFT>
                  Adding the breadboard allowed us to create common power and ground lines and connect more
                  components than there are power and ground pins on the Arduino. We were then able to connect the line
                  sensors to the Arduino. The current breadboard is temporary, as smaller breadboards were unavailable 
                  during the lab. We plan to attach a smaller breadboard or potentially solder breadboards in order to 
                  securely and reliably attach electrical components to the board. We also plan to attach the breadboard 
                  more securely to the chassis, and will organize the wiring better especially as we add more components.
                </p>
                <h5>Line Sensor Update</h5>
                <p ALIGN=LEFT>
                  We used QRE1113 line sensors, which work by transmitting and then detecting IR light that reflects back 
                  to a phototransistor on the sensor. These sensors are mounted at the front of the robot facing downward, 
                  with the sensors only a few centimeters above the ground to maximize sensor accuracy.
                  <br/>
                  Our first design idea used three line sensors: two for staying on the line, and a third for detecting 
                  intersections.  In our final implementation, we were able to use software to perform all the required 
                  tasks using only two sensors. We then positioned the sensors further apart than they were in our initial 
                  design so that they wouldn't trigger as often and the robot would make fewer adjustments to stay on the 
                  line. This hardware update helped improve the robot's navigation speed and smoothness.
                </p>
                <figure ALIGN=LEFT>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180913_204620.jpg" width="560"/>
                  <font size="3">
                  <figcaption> <b>Front view of Robot, Final Version</b>
                  </figcaption>
                  </font>
                </figure>
                <h5>Circuit</h5>
                <p ALIGN=LEFT>
                  Our final circuit with the sensors looked like this:
                </p>
                <figure ALIGN=LEFT>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/Schematic-RobotLineSensing.PNG" width="560"/>
                  <font size="3">
                  <figcaption> <b>Schematic of Updated Robot with 2 Line Sensors</b>
                  </figcaption>
                  </font>
                </figure>
                <h3>Software Design</h3>
                <p ALIGN=LEFT>
                  We used a simple software algorithm for performing these tasks. However, we also began the ground work 
                  for abstracting away some of the robot functions such as servo speed for robot forward movement and turning, 
                  which will be useful as we develop more complex algorithms to solve difficult problems later on. 
                </p>
                <h5>The Line Sensor</h5>
                <p ALIGN=LEFT>
                  We tried to use the <code>analogRead()</code> function to read input values from the sensors corresponding to 
                  the darkness of the surface, but the numbers we read were illogical and unuseable. Instead, we used 
                  digital pins to detect how long it takes to charge the sensor's phototransistor; the return values 
                  indicate the darkness of the surface. We used digital interrupts to gather data from the line sensors. 
                  The Arduino supports two digital state change interrupts which trigger an interrupt whenever the state 
                  of a digital pin changes. We used the interrupts for sensors with time sensitive operations such as 
                  following the line.
                </p>
                <h5>Code Snippet for Reading from the Line Sensor Using Digital Pins</h5>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>volatile</span> <span style='color:#0000ff; font-weight:bold; '>int</span> SENSOR0_READING<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>volatile</span> <span style='color:#0000ff; font-weight:bold; '>int</span> SENSOR0_TIMER<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>int</span> SENSOR0_PIN<span style='color:#0000ff; '>=</span><span style='color:#800000; '>2</span><span style='color:#0000ff; '>;</span>
    
    <span style='color:#008000; '>/**</span>
    <span style='color:#008000; '>* Triggers when the state of digital pin goes from high to low.</span>
    <span style='color:#008000; '>* Updates SENSOR0_READING variable.</span>
    <span style='color:#008000; '>*/</span>
    <span style='color:#0000ff; font-weight:bold; '>void</span> SENSOR0_ISR<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
        SENSOR0_READING <span style='color:#0000ff; '>=</span> micros<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>-</span> SENSOR0_TIMER<span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//time difference as a result </span>
        <span style='color:#008000; '>//of digital signal changing states from high to low. </span>
        SENSOR0_TIMER <span style='color:#0000ff; '>=</span> micros<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> 
        pinMode<span style='color:#0000ff; '>(</span>SENSOR0_PIN<span style='color:#0000ff; '>,</span> OUTPUT<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//reset the digital pin</span>
        digitalWrite<span style='color:#0000ff; '>(</span>SENSOR0_PIN<span style='color:#0000ff; '>,</span> HIGH<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//put back to high for next reading when low</span>
        pinMode<span style='color:#0000ff; '>(</span>SENSOR0_PIN<span style='color:#0000ff; '>,</span> INPUT<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>  
    <span style='color:#0000ff; '>}</span>
    <span style='color:#0000ff; font-weight:bold; '>void</span> setup<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
        attachInterrupt<span style='color:#0000ff; '>(</span>digitalPinToInterrupt<span style='color:#0000ff; '>(</span>SENSOR0_PIN<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>,</span> SENSOR0_ISR<span style='color:#0000ff; '>,</span> LOW<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    </pre>
    <!--Created using ToHtml.com on 2018-11-29 06:24:17 UTC -->
                </p>
                <h5>Follow the Line</h5>
                <p ALIGN=LEFT>
                  To follow the line, we used simple <code>if</code> statements to adjust the robot’s path. 
                  The two line sensors detected when the robot moved too far off-center of the white 
                  line. We used a conditional to move the robot left or right when the line sensors’ 
                  values passed a certain threshold indicating they were over the white tape, and had 
                  it move straight forward when both sensors detected white tape at an intersection.
                </p>
                <h5>Code Snippet for Following the Line</h5>
                
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR0_READING<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>400</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> SENSOR1_READING<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>400</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span> <span style='color:#008000; '>//continue straight</span>
    forward<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR1_READING <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>400</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span> <span style='color:#008000; '>//turning right</span>
    turn_right<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR0_READING <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>400</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>{</span> <span style='color:#008000; '>//turning left</span>
    turn _left<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span><span style='color:#0000ff; '>{</span>
    forward<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-11-29 06:25:20 UTC -->
               
                </p>
                <h5>Demonstration of Robot Following the Line</h5>
                <a><img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/gif-followLine.gif"
                        width = "560" height = "auto"></a>
                <p ALIGN=LEFT>
                  The robot reliably follows the line. The distance between the line sensors 
                  was good enough for the robot to be "following" the line but not constantly repositioning 
                  itself; we wanted to maximize the forward moving time while turning only occasionally, 
                  when the robot moved off the line.
                  <br/>
                  Currently, the robot turns very sharply to reposition itself because we stop one wheel 
                  and move the other to create a turning motion. Moving forward, we want to smooth the 
                  robot's readjustment so that it will not lose too much speed when readjusting.
                </p>
                <h5>Figure-8</h5>
                <p ALIGN=LEFT>
                  To implement a figure-8 path, we built off the line-following code and added a conditional 
                  checking when both sensors hit a white line at an intersection.  Using an array, we created 
                  a map of the sequence of turns the robot should take at each intersection to create a 
                  figure-8, with each element of the array indicating the direction to turn. The array is 
                  repeatable such that the robot will continuously move in a figure-8 formation.
                </p>
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>char</span> map1<span style='color:#0000ff; '>[</span><span style='color:#0000ff; '>]</span> <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>{</span>right<span style='color:#0000ff; '>,</span>left<span style='color:#0000ff; '>,</span>left<span style='color:#0000ff; '>,</span>left<span style='color:#0000ff; '>,</span>left<span style='color:#0000ff; '>,</span>right<span style='color:#0000ff; '>,</span>right<span style='color:#0000ff; '>,</span>right<span style='color:#0000ff; '>}</span><span style='color:#0000ff; '>;</span> <span style='color:#008000; '>//dependent on </span>
    <span style='color:#008000; '>//where robot starts</span>
    <span style='color:#0000ff; font-weight:bold; '>int</span> i<span style='color:#0000ff; '>=</span><span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> 
    <span style='color:#0000ff; font-weight:bold; '>void</span> loop<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>{</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR0_READING<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>400</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> SENSOR1_READING<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>400</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
            map1<span style='color:#0000ff; '>[</span>i<span style='color:#0000ff; '>%</span><span style='color:#800000; '>8</span><span style='color:#0000ff; '>]</span><span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>right <span style='color:#0000ff; '>?</span> turn_right<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>:</span> turn_left<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            delay<span style='color:#0000ff; '>(</span><span style='color:#800000; '>1200</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            i<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; '>}</span><span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR1_READING <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>400</span><span style='color:#0000ff; '>)</span> <span style='color:#008000; '>//turning right</span>
            turn_right<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR0_READING <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>400</span><span style='color:#0000ff; '>)</span>  <span style='color:#008000; '>//turning left</span>
            turn _left<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
            forward<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; '>}</span>
    </pre>
    <!--Created using ToHtml.com on 2018-11-29 06:27:12 UTC -->
                
                <h5>Video of Robot Performing Figure-8</h5>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/mZf0CTAzZvA?controls=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                <p ALIGN=LEFT>
                  Currently the robot doesn't turn as well as we would like; it doesn't turn for long 
                  enough and relies on the line sensors to reposition itself on the line after the turn. 
                  There is more room to optimize the robot's turn configuration either by optimizing the 
                  turn or the robot's shifting. 
                </p>
                <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180913_204644.jpg" width = "340"/>
                <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone1/20180913_204557.jpg" width = "340"/>
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 6 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-6">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Milestone 2: Wall Detection and Movement through Maze</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/milestone2.gif" alt="">
              <p class="mb-5" ALIGN=LEFT>
              <h1>Introduction</h1>
              <p ALIGN=LEFT>
                    The goal of milestone 2 was to implement wall-detection functionality 
                    and make the robot avoid other robots, while still successfully line-following 
                    in order to traverse the maze. To accomplish this task, we added 
                    short-range IR sensors to the robot to detect walls and refined our 
                    detection of the 6.08kHz IR signal emitted by the robot IR hat. Our 
                    final product was a demonstration of the robot traversing an arbitrary 
                    maze using a left-wall-following rule, and stopping whenever it detected the IR hat.
              </p>
              
              
              <h1>Line-following Improvements</h1>
              <p ALIGN=LEFT>
                    Line-following functionality was previously implemented in milestone 1, 
                    but when we came back to this after working on Lab 2 we discovered that 
                    our implementation required some adjustments. Due to the added weight of 
                    new components, the power necessary to turn the robot 90 degrees increased; 
                    this threw off our initial code, so we re-calibrated the system. We also found 
                    that we needed to adjust the height of our line sensors. They were too low 
                    to the ground, which led to sensing issues at intersections and caused the 
                    robot to occasionally stop inexplicably instead of turning. We added nuts 
                    to act as a spacer onto the screw that attaches the sensors to the robot,
                    raising the sensors higher, and re-calibrated our white-black threshold.
                </p>
              
              
              <figure>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone2/line_sensor_spacers2.jpg" width="560"/>
                  <font size="3">
                  <figcaption> <b>Raised Line Sensors</b>
                  </figcaption>
                  </font>
              </figure>
              <h1>Wall Detection</h1>
              <p ALIGN=LEFT>
  
  
                    To avoid walls while navigating the maze, we attached short-range 
                    IR sensors to the front and left side of the chassis. These sensors 
                    detect objects at distances between 4 cm and 30cm, which is appropriate 
                    for our use.
                </p>
              
              <figure>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone2/IMG_0373.jpg" width="600"/>
                  <font size="3">
                  <figcaption> <b>Updated Robot with Wall Scensors</b>
                  </figcaption>
                  </font>
              </figure>
              <p ALIGN=LEFT> The wall sensors output an analog value corresponding to the distance of 
                    an object from the sensor, and our algorithm sets threshold values to determine 
                    whether there is a wall in the grid space directly adjacent to the robot.  
                    We implemented a left-hand wall following rule, defaulting to a left turn at 
                    an intersection if no wall is detected to the left. If the robot only detects
                    a wall to the left, it goes straight, and if there is a wall both to the left
                    and in front of the robot, it turns right. The following video shows our robot
                    traversing a small maze:
                </p>
             
              <iframe width="560" height="315" ALIGN=LEFT src="https://www.youtube.com/embed/31nsK4JZrqU?rel=0&amp;controls=0" 
                      frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
              </iframe>
              <p ALIGN=LEFT> The core of our algorithm is a finite state machine. It has states that make the robot either turn left, 
                    turn right, or move forward, adjust the machine to stay on the line, and sense for other robots.
                </p>
              
              <h1>Robot Avoidance</h1>
              <p ALIGN=LEFT> The detecting of other robots was already mostly implemented in Lab 2 by the optical team, 
                    but we integrated the robot’s response to the IR hat’s signal this week.
                </p>
              
              <figure>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone2/phototransistor2.jpg" 
                  width="500"/>
                  <font size="3">
                  <figcaption> <b>View of Phototransistor</b>
                  </figcaption>
                  </font>
              </figure>
              <p ALIGN=LEFT> To increase the sensitivity of the phototransistor, we put the sensor at the head of the robot.
                </p>
              
              
              <figure>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone2/IMG_0374.jpg" width="560"/>
                  <font size="3">
                  <figcaption> <b>Front View of Robot</b>
                  </figcaption>
                  </font>
              </figure>
              The phototransistor can be seen right in front of the battery.
              <p ALIGN=LEFT>Placing the phototransistor there improved our ability to sense other robots 
                    in front, to the right, and to the left of ours. Our main focus is on detecting
                    robots in front of us, while detection of robots to the side is more limited. 
                    We chose to have the robot simply stop when it detects another robot. The 
                    following video shows our robot stopping when we hold the IR hat in front 
                    of it approximately 5.5 inches above the ground:
                </p>
              
              
              
              
              <iframe width="560" height="315" src="https://www.youtube.com/embed/r3OLbq3HsRQ?rel=0&amp;controls=0" 
                      frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
              </iframe>
              <h1>Code Updates</h1>
              We updated the FSM used in our lab 2 integration with addtional states:
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>enum states <span style='color:#0000ff; '>:</span> uint8_t {
    START<span style='color:#0000ff; '>,</span>
    AUDIO_DECT<span style='color:#0000ff; '>,</span>
    IR_DECT<span style='color:#0000ff; '>,</span>
    ROBOT_SENSE<span style='color:#0000ff; '>,</span>
    ROBOT_DETECTED<span style='color:#0000ff; '>,</span>
    ROBOT_TURN_LEFT<span style='color:#0000ff; '>,</span>
    ROBOT_TURN_RIGHT
}<span style='color:#0000ff; '>;</span>
</pre>
            <!--Created using ToHtml.com on 2018-12-04 20:33:34 UTC -->
            <p ALIGN=LEFT> We concentrated the use of the FFT for processing of the audio and IR signals into 
                    two states. We also have states specifically for the robot turning at intersections
                    because we hope to eventually implement a more robust robot turning algorithm. We 
                    have somewhat of a skeleton code for ROBOT_DETECTED, ROBOT_TURN_LEFT, and ROBOT_TURN_RIGHT 
                    because we intend to implement them with more complexity than simple delays. The
                    ROBOT_SENSE state is the main state that the robot will be in, where it is following 
                    the line and detecting the intersections. ROBOT_DETECTED handles cases where we detect
                    other robots with the IR detection state. The current FSM looks like this:
                </p>

<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>#define WALL_FRONT <span style='color:#800000; '>2</span>
#define WALL_LEFT <span style='color:#800000; '>3</span>
#define WAITTIME <span style='color:#800000; '>800</span>
switch <span style='color:#0000ff; '>(</span>STATE<span style='color:#0000ff; '>)</span>{
<span style='color:#0000ff; font-weight:bold; '>case</span> START<span style='color:#0000ff; '>:</span>
    STATE <span style='color:#0000ff; '>=</span> AUDIO_DECT<span style='color:#0000ff; '>;</span>
    break<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>case</span> AUDIO_DECT<span style='color:#0000ff; '>:</span>
    calculate_FFT<span style='color:#0000ff; '>(</span>MIC<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>pass_thresh_hold<span style='color:#0000ff; '>)</span> 
        STATE <span style='color:#0000ff; '>=</span> IR_DECT<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span>
        STATE <span style='color:#0000ff; '>=</span> AUDIO_DECT<span style='color:#0000ff; '>;</span>
    break<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>case</span> IR_DECT<span style='color:#0000ff; '>:</span>
    calculate_FFT<span style='color:#0000ff; '>(</span>IR<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>pass_thresh_hold<span style='color:#0000ff; '>)</span>
        STATE <span style='color:#0000ff; '>=</span> ROBOT_DETECTED<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span>
        STATE <span style='color:#0000ff; '>=</span> ROBOT_SENSE<span style='color:#0000ff; '>;</span>
    u32wait_ir <span style='color:#0000ff; '>=</span> millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    break<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>case</span> ROBOT_SENSE<span style='color:#0000ff; '>:</span>
    FRONTWALL <span style='color:#0000ff; '>=</span> analogRead<span style='color:#0000ff; '>(</span>WALL_FRONT<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    LEFTWALL <span style='color:#0000ff; '>=</span> analogRead<span style='color:#0000ff; '>(</span>WALL_LEFT<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>SENSOR_R_READING<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>200</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> SENSOR_L_READING<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>200</span><span style='color:#0000ff; '>)</span>{ 
        <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>LEFTWALL <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>200</span><span style='color:#0000ff; '>)</span>{
            u32wait <span style='color:#0000ff; '>=</span> millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            STATE <span style='color:#0000ff; '>=</span> ROBOT_TURN_LEFT<span style='color:#0000ff; '>;</span>
        } else if <span style='color:#0000ff; '>(</span>FRONTWALL <span style='color:#0000ff; '>></span> <span style='color:#800000; '>115</span><span style='color:#0000ff; '>)</span> {
            u32wait <span style='color:#0000ff; '>=</span> millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
            STATE <span style='color:#0000ff; '>=</span> ROBOT_TURN_RIGHT<span style='color:#0000ff; '>;</span>
        } <span style='color:#0000ff; font-weight:bold; '>else</span> 
            robot_move<span style='color:#0000ff; '>(</span>forward<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    }else if<span style='color:#0000ff; '>(</span>SENSOR_L_READING <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>200</span><span style='color:#0000ff; '>)</span>
        robot_move<span style='color:#0000ff; '>(</span>adj_right<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    else if<span style='color:#0000ff; '>(</span>SENSOR_R_READING <span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>200</span><span style='color:#0000ff; '>)</span>
        robot_move<span style='color:#0000ff; '>(</span>adj_left<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span>
        robot_move<span style='color:#0000ff; '>(</span>forward<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>-</span>u32wait_ir<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>></span> WAITTIME<span style='color:#0000ff; '>)</span>{
        u32wait_ir <span style='color:#0000ff; '>=</span> millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
        STATE <span style='color:#0000ff; '>=</span> IR_DECT<span style='color:#0000ff; '>;</span>
    }
    break<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>case</span> ROBOT_DETECTED<span style='color:#0000ff; '>:</span>
    robot_move<span style='color:#0000ff; '>(</span>rstop<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span> <span style='color:#0000ff; '>/</span><span style='color:#0000ff; '>/</span>stop till we don't detect IR
    STATE <span style='color:#0000ff; '>=</span> IR_DECT<span style='color:#0000ff; '>;</span>
    break<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>case</span> ROBOT_TURN_LEFT<span style='color:#0000ff; '>:</span>
    robot_move<span style='color:#0000ff; '>(</span>left<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>-</span>u32wait<span style='color:#0000ff; '>></span><span style='color:#800000; '>700</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>/</span><span style='color:#0000ff; '>/</span>same as a delay
        STATE <span style='color:#0000ff; '>=</span> ROBOT_SENSE<span style='color:#0000ff; '>;</span>
    break<span style='color:#0000ff; '>;</span>

<span style='color:#0000ff; font-weight:bold; '>case</span> ROBOT_TURN_RIGHT<span style='color:#0000ff; '>:</span>
    robot_move<span style='color:#0000ff; '>(</span>right<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>millis<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>-</span>u32wait<span style='color:#0000ff; '>></span><span style='color:#800000; '>700</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>/</span><span style='color:#0000ff; '>/</span>same as a delay
        STATE <span style='color:#0000ff; '>=</span> ROBOT_SENSE<span style='color:#0000ff; '>;</span>
    break
}
</pre>
<!--Created using ToHtml.com on 2018-12-04 20:34:32 UTC -->
<p ALIGN=LEFT>
        In ROBOT_SENSE, we read from the wall sensors and the line 
        sensors to tell if we need to either turn or adjust the robot 
        to stay on the line. Just like in milestone 1, we only consider 
        turning if both sensors detect a white line; this time, however,
        we turn based on the readings of the wall sensors rather than a 
        pre-determined pattern.
</p>
<p ALIGN=LEFT>
        The IR sensing occurs every 800 ms, which can be adjusted later
        based on computation needs. Every 800 ms, we switch the state to 
        IR_DECT and run the FFT with a processing algorithm. Currently,
        we only do averages of N FFT cycles but may consider moving averages.
</p>
  

              
              <h1>Demonstration</h1>
              <p ALIGN=LEFT>
                    We show what our robot is “thinking” by flashing LEDs indicating what 
                    outside stimuli the robot has picked up and will be reacting to according 
                    to the FSM.  As it navigates the maze, it stays with the wall on its 
                    left.  The red LED indicates that the left path is clear, so the robot
                    will turn left.  If the yellow LED has turned on, this indicates that 
                    both the front and left wall sensors detect walls, so the robot will 
                    respond by turning right. The green LED turns on when the IR sensor has 
                    detected a signal from the IR hat (i.e., detected another robot), and the 
                    robot will halt to avoid the other robot.
                </p>

              <iframe width="560" height="315" src="https://www.youtube.com/embed/aWahZUqSUfI?rel=0&amp;controls=0" 
              frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
              </iframe>
              <h1>Conclusion</h1>
              <p ALIGN=LEFT>
                
              We have progressed further toward our robot being able to successfully 
              navigate the final competition maze. As we continue to optomize our design, 
              we intend to add a third wall sensor to the right side of the robot to allow
              it to detect walls on all side for the purpose of mapping the maze. We also
              need to tune the IR sensor to better  detect robots coming from the sides. 
              This will likely involve re-adusting the battery's positioning since its USB
              blocks some of the signals to the IR. The FSM design for our robot control
              is a robust and modular system that allows the robot to multitask by checking 
              states per cycle and allow us to easily add more tasks if needed. The robot 
              can switch its current task every clock cycle of the Arudino. In the future,
              we might build a complex scheduler that decides what state the robot is in 
              based on current conditions which can adapt to the various different activities 
              the robot will be performing in the competition. In terms of implementation, 
              we would like to write a more robust turning algorithm that will not rely on 
              hard-coded delays, which would allow the robot to  adapt to different conditions
              as it turns. Our current method assumes that the robot will always be in the
              same position when it starts turning, but that may not be the case in the long term. 
                </p>
                            
                
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 7 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-7">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Milestone 3: Search Algorithm</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/milestone3.gif" alt="">
              <p class="mb-5" ALIGN=LEFT>
              <h1>Introduction</h1>
              <p ALIGN=LEFT>
                    The goal of this milestone was to implement a search algorithm that 
                    would allow our robot to fully explore a maze of any configuration.
                    In order to visit every square in a maze with an arbitrary configuration
                    of walls, the robot’s next move is decided with a more intelligent
                    algorithm than our initial left-hand-following rule. We incorporated 
                    a Depth-First Search algorithm into our Arduino code to guide the 
                    robot’s exploration the maze. Additionally, we updated our basestation 
                    code and demonstrated that we are able to display the information the
                    robot collects on the GUI.
              </p>
              
              <h1>Search Algorithm</h1>
              <p ALIGN=LEFT>
                    After playing around with Dijkstra’s Algorithm and realizing how difficult 
                    it would be to implement in reality on the Arduino, we decided to write a 
                    simple Depth First Search algorithm to determine our robot’s path when
                    exploring a maze. This type of search algorithm traverses as far as there 
                    is to go down a single path before backtracking to explore the next path, 
                    with a predetermined preference for the order in which the path options are 
                    explored. For the purpose of exploring a maze, this means turning around to 
                    backtrack only when all surrounding squares are either a wall or previously
                    explored. The algorithm takes into account the spaces the robot has already
                    encountered in order to allow it to explore more paths in as short a time as 
                    possible. In addition, the search algorithm keeps the robot from traversing 
                    in an endless loop. Although we at first tried to implement this algorithm with
                    the robot virtually exploring the maze to find an unexplored square at every 
                    intersection, we eventually went the much simpler route of exploring the maze 
                    one square at a time as the robot traveled through it. Our logic took the
                    following form:
              </p>
              
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span> <span style='color:#0000ff; '>(</span>no_front_wall<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>forward_space_unexplored<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>)</span> 
<span style='color:#0000ff; '>{</span>
    go_forward<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span> 
<span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span> <span style='color:#0000ff; '>(</span>no_right_wall<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>right_space_unexplored<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>)</span> 
<span style='color:#0000ff; '>{</span>
    turn_right<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span> 
<span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span> <span style='color:#0000ff; '>(</span>no_left_wall<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>left_space_unexplored<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>)</span> 
<span style='color:#0000ff; '>{</span>
    turn_left<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span> <span style='color:#0000ff; font-weight:bold; '>else</span> 
<span style='color:#0000ff; '>{</span>
    backtrack<span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>

update_robot_state<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
update_visited_lists<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 20:06:32 UTC -->
<p ALIGN=LEFT>
        Our search order preference for the algorithm is forward, right, left, 
        then backward. The robot keeps a list of the squares it has visited and 
        the order in which it has visited them in order to allow it to backtrack
        to the next unexplored path. It also keeps track of its position and direction. 
        Once the algorithm was implemented into our code, we successfully tested the 
        it in several different maze configurations of various sizes and confirmed
        that it explored as we wanted it to. The following video is a demonstration 
        of one of these tests:
</p>
              
              <h3>Regular Speed:</h3>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/p1IaieuAFX0?rel=0&amp;controls=0" 
              frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope;
                                             picture-in-picture" allowfullscreen>
              </iframe>
              <h3>3x Speed:</h3>
              <iframe width="560" height="315" src="https://www.youtube.com/embed/JbzAFhrltYo?rel=0&amp;controls=0" frameborder="0" 
              allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
              </iframe>
              <h1>Basestation Modification</h1>
              <p ALIGN=LEFT>
                    In order to reflect the modifications made to the robot’s code, we also 
                    had to update our basestation code to better receive and process the information
                    the robot collects as it explores the maze. We had not touched the code since 
                    we initially wrote it for Lab 3, so we had to make sure it would correctly 
                    interpret the radio messages from the robot and update the GUI to correctly 
                    display what the robot discovers. Since we had to keep track of the robot’s
                    position and direction for the algorithm, we were able to simplify the basestation
                    code by sending this information directly from the robot rather than having
                    the basestation calculate and keep track of it. This decreases the probability 
                    of discrepancies between the robot’s exploration and the GUI. We therefore slightly 
                    changed the structure of our radio messages, so they now look like this:
              </p>
              
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#800000; '>15</span>        <span style='color:#800000; '>12</span> <span style='color:#800000; '>11</span>         <span style='color:#800000; '>8</span> <span style='color:#800000; '>7</span>    <span style='color:#800000; '>6</span> <span style='color:#800000; '>5</span>       <span style='color:#800000; '>3</span> <span style='color:#800000; '>2</span>       <span style='color:#800000; '>0</span>
<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span>
<span style='color:#0000ff; '>|</span> X<span style='color:#0000ff; '>-</span>POS      <span style='color:#0000ff; '>|</span> Y<span style='color:#0000ff; '>-</span>POS      <span style='color:#0000ff; '>|</span> DIR  <span style='color:#0000ff; '>|</span>TREASURE <span style='color:#0000ff; '>|</span> WALLS   <span style='color:#0000ff; '>|</span>
<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>-</span><span style='color:#0000ff; '>+</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 20:07:58 UTC -->

<p ALIGN=LEFT>
        With the first 8 bits dedicated to the x- and y-coordinates of the robot in the maze,
        the next 2 bits dedicated to the robot's direction, the following 3 bits dedicated 
        to any treasures detected, and the last 3 bits dedicated to the readings from the
        three wall sensors.
</p>
<p ALIGN=LEFT>
        Additionally, we coded the basestation to display a mirrored version of the maze that the robot
              explores due to the fact that our algorithm considers the point (0,0) to be the
              bottom-left corner, and the GUI treats (0,0) as the top-left corner.
</p>
              

              
              
              <h1>Final Implementation and Demonstration</h1>
              <p ALIGN=LEFT>

                    Once the basestation was fixed, we tested the search algorithm with the radios and
                    a fully operational basestation. We confirmed that the basestation was aligned with
                    the radio messages sent by the robot, and able to decode them to output the correct
                    information. Finally, we ran the GUI to display the output from the basestation. 
                    In the end, we were able to correctly represent the entire maze with the GUI on the
                    basestation’s screen. The following video is a demonstration of the robot exploring
                    an entire maze and updating the GUI to display it correctly:
            </p>

              <iframe width="560" height="315" src="https://www.youtube.com/embed/cKP1L6YakC4" frameborder="0"
                      allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
              </iframe>
              <p ALIGN=LEFT>
                    We also demonstrated that the robot was able to start at a 660Hz tone and explore an entire
                    maze with the algorithm, although we were unable to get complete video evidence of this
                    because the GUI kept crashing around 5 or 6 squares into the maze exploration.
            </p>
              

              <iframe width="560" height="315" src="https://www.youtube.com/embed/gVXUPPQBTW0" frameborder="0"
                      allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
              </iframe>
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portfolio Modal 8 -->
    <div class="portfolio-modal mfp-hide" id="portfolio-modal-8">
      <div class="portfolio-modal-dialog bg-white">
        <a class="close-button d-none d-md-block portfolio-modal-dismiss" href="#">
          <i class="fa fa-4x fa-times"></i>
        </a>
        <div class="container text-center">
          <div class="row">
            <div class="col-lg-6 mx-auto">
              <h2 class="text-secondary text-uppercase mb-0">Milestone 4</h2>
              <hr class="star-dark mb-5">
              <img class="img-fluid mb-5" src="images/bootstrap/milestone4.gif" alt="">
              <p class="mb-5" ALIGN=LEFT>
              <h1>Introduction</h1>
              <p ALIGN=LEFT>

                    The goal of milestone 4 are as follows:
              </p>
              <ul ALIGN=LEFT>
                <li> Build off our results from lab 4 and implement treasure shape detection.
                <li> Integrate our camera and FPGA system into our robot.
              </ul>
              <p ALIGN=LEFT>
                    Treasure shape detection requires a more complicated algorithm then color
                    detection because it deals directly with image processing. We must distinguish 
                    between three shapes: square, triangle, and diamond. For our algorithm to be 
                    robust, we must successfully threshold each shape.
              </p>
              <p ALIGN=LEFT>

                    Integration is not a trivial task. The challenges are in both hardware and 
                    software. On the hardware side, we must figure out the ideal place for the camera 
                    and FPGA in the robot chasis and route power to both these devices. The camera 
                    placement is important as it determines where the the robot can detect the treasure 
                    and on which wall. On the software side, we must integrate the treasure detection 
                    into the Robot control flow. We need to create new FSM states to account for the
                    fact that treasures can exist at every intersection; this also means that there
                    is more processing to do at every interestion. We must change the state transitions
                    properly such that treasure detection does not interfere with the rest of the robot's
                    functionality. The radio from lab 3 must also be updated because the radio only 
                    handles wall mapping and not treasure mapping. This applies for both basestation and robot.
              </p>
              
            
              
              <h1>Updated Robot</h1>
              <p ALIGN=LEFT>We decided to update the robot chassis to fit the camera. The Robot will now have three 
                    layers. We will add a new layer under the current first layer of the robot where the servos 
                    are. This will be used to store the batteries. We will need two batteries, one for the Arduino 
                    and one for servo and sensors. Previously, we used the second layer of the robot to hold the 
                    battery. However, we decided to use the second chassis layer of the robot to hold the FPGA and 
                    camera hardware. The third layer will host the Arduino and sensor circuitry.
              </p>
              
              
              <figure>
                  <img src="https://raw.githubusercontent.com/PBC48/ECE-3400-Fall-2018/master/docs/images/milestone4/IMG_1187.jpg" width="500"/>
                  <font size="3">
                  <figcaption> <b>Camera and FPGA Mounted</b>
                  </figcaption>
                  </font>
              </figure>
              <p ALIGN=LEFT>
                    In the image above, we mounted the Camera and FPGA on a a new chasis. We also soldered 
                    some of the intermediate connectors onto a protoboard such as the resistors required for I2C. 
                    This will be the new second level of the robot. We decided to have the camera face only one
                    direction and only have the robot detect one of the walls at each intersection. We will miss 
                    some of the walls but this allows the robot movement algorithm to be simpler.
                    
              </p>
              
              <h1>Treasure Color Detection</h1>
              
              <iframe width="560" height="315" src="https://www.youtube.com/embed/nbeuPRgot2Y?controls=0" 
                      frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
              </iframe>
              <p ALIGN=LEFT>
                    We already have color detection from lab4 algorithm which was reliable if the camera can reliably 
              detect the colors. We debug the camera by using VGA display connected to a monitor to see what the 
              camera sees by displaying the QCIF image on the monitor. The camera clearly has trouble capturing
              color on the image if the lighting is poor. This leads to misdetections which our algorithms can't
              solve since the problem lies in the quality of the image. We can only hope that the lighting during 
              the competition is better than in the lab. We may also consider adding a light pointing in the same 
              direction as the camera so that it can better capture the image.
                    
              </p>             
              
              <p ALIGN=LEFT>
                    Another strategy we used to improve reliability was to use averages. This method allows us to avoid
                    outliers in detection. 
                    
              </p>   
              
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'><span style='color:#0000ff; font-weight:bold; '>for</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; font-weight:bold; '>int</span> i <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span> i<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>500</span><span style='color:#0000ff; '>;</span> i<span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>{</span>
    treasure1 <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>T1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    treasure2 <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>T2<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    color1     <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>C1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    color2     <span style='color:#0000ff; '>=</span> digitalRead<span style='color:#0000ff; '>(</span>C2<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    treasure  <span style='color:#0000ff; '>=</span> <span style='color:#0000ff; '>(</span>treasure2 <span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>|</span>treasure1<span style='color:#0000ff; '>;</span>
    color   <span style='color:#0000ff; '>=</span>   <span style='color:#0000ff; '>(</span>color2<span style='color:#0000ff; '>&lt;</span><span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>|</span><span style='color:#0000ff; '>(</span>color1<span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>color<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>BLUE<span style='color:#0000ff; '>)</span> blueCount <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span>color<span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span>RED<span style='color:#0000ff; '>)</span>   redCount <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> nonCount <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>treasure <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> SQUARE<span style='color:#0000ff; '>)</span> sqCount <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span><span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span> treasure <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> TRIANGLE<span style='color:#0000ff; '>)</span> triCount <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>if</span><span style='color:#0000ff; '>(</span> treasure <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> DIAMOND<span style='color:#0000ff; '>)</span>  diaCount <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>else</span> nonTreasure <span style='color:#0000ff; '>+</span><span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span><span style='color:#0000ff; '>;</span>
    delay<span style='color:#0000ff; '>(</span><span style='color:#800000; '>2</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>;</span>
<span style='color:#0000ff; '>}</span>
</pre>
<!--Created using ToHtml.com on 2018-12-04 20:13:44 UTC -->
              
<p ALIGN=LEFT>
        The code above shows us processing averages on the Arduino where we would 
        take multiple readings over a second and then count the predictions. We would
        then choose the prediction with the highest count as our answer. To execute 
        this well, we would need to be wary of timing constraints of the camera. 
</p>
<p ALIGN=LEFT>
        The camera completes transmission for a pixel of data every two clock cycles. 
        An image is 176 x 144 in size in terms of pixels and our clock is 25 MHz. This 
        translates to two milliseconds per image for processing our one image. We count
        the predictions for 500 images.
</p>
      
              
              
              
              <h1>Treasure Shape Detection</h1>
              <p ALIGN=LEFT>
                    Treasure shape detection is much more difficult than color detection. We needed 
                    to detect the differences in color concentration between different parts of the 
                    image. Our design is to insert three different bars in the image and only count
                    the color values within those bars. In theory, the bars will have differences in 
                    values for different shapes and we can compare the bars and distinguish between 
                    the shape of the treasure. 
                </p>
                        
<pre ALIGN=LEFT style='color:#000000;background:#ffffff;'>always @<span style='color:#0000ff; '>(</span>posedge CLK<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>!VGA_VSYNC_NEG<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        top <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        mid <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        bot <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        red1 <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        red2 <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        red3 <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        blue1 <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        blue2 <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        blue3 <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        done_treasure <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>0</span><span style='color:#0000ff; '>;</span>
        treasure <span style='color:#0000ff; '>=</span> NONE<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    else if <span style='color:#0000ff; '>(</span>VGA_PIXEL_X <span style='color:#0000ff; '>></span> `X_LOW_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_X <span style='color:#0000ff; '>&lt;</span> 
        `X_HIGH_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>></span> `Y_BARfirstTop <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>&lt;</span> 
        `Y_BARfirstBot<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        red1 <span style='color:#0000ff; '>=</span> red1 <span style='color:#0000ff; '>+</span> red<span style='color:#0000ff; '>;</span>
        blue1 <span style='color:#0000ff; '>=</span> blue1 <span style='color:#0000ff; '>+</span> blue<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    else if <span style='color:#0000ff; '>(</span>VGA_PIXEL_X <span style='color:#0000ff; '>></span> `X_LOW_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_X <span style='color:#0000ff; '>&lt;</span> 
        `X_HIGH_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>></span> `Y_BARsecondTop <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>&lt;</span> 
        `Y_BARsecondBot<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        red2 <span style='color:#0000ff; '>=</span> red2 <span style='color:#0000ff; '>+</span> red<span style='color:#0000ff; '>;</span>
        blue2 <span style='color:#0000ff; '>=</span> blue2 <span style='color:#0000ff; '>+</span> blue<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    else if <span style='color:#0000ff; '>(</span>VGA_PIXEL_X <span style='color:#0000ff; '>></span> `X_LOW_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_X <span style='color:#0000ff; '>&lt;</span> 
        `X_HIGH_THRESH <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>></span> `Y_BARthirdTop <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> VGA_PIXEL_Y <span style='color:#0000ff; '>&lt;</span>
        `Y_BARthirdBot<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        red3 <span style='color:#0000ff; '>=</span> red3 <span style='color:#0000ff; '>+</span> red<span style='color:#0000ff; '>;</span>
        blue3 <span style='color:#0000ff; '>=</span> blue3 <span style='color:#0000ff; '>+</span> blue<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>VGA_PIXEL_Y <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> `SCREEN_HEIGHT<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> done_color <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> !done_treasure<span style='color:#0000ff; '>)</span> 
    <span style='color:#0000ff; font-weight:bold; '>begin</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span>color <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> RED<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>diffr3<span style='color:#0000ff; '>></span>diffr2<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>diffr3<span style='color:#0000ff; '>></span>diffr1<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> diffr3<span style='color:#0000ff; '>></span><span style='color:#800000; '>50</span><span style='color:#0000ff; '>)</span>
            treasure <span style='color:#0000ff; '>=</span> TRIANGLE<span style='color:#0000ff; '>;</span>
        else if<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>diffr1<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>diffr2<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>diffr3<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            treasure <span style='color:#0000ff; '>=</span> SQUARE<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
            treasure <span style='color:#0000ff; '>=</span> DIAMOND<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        else if <span style='color:#0000ff; '>(</span>color <span style='color:#0000ff; '>=</span><span style='color:#0000ff; '>=</span> BLUE<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        <span style='color:#0000ff; font-weight:bold; '>if</span> <span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>diffb3<span style='color:#0000ff; '>></span>diffb2<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>diffb3<span style='color:#0000ff; '>></span>diffb1<span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> diffb3<span style='color:#0000ff; '>></span><span style='color:#800000; '>50</span><span style='color:#0000ff; '>)</span>
            treasure <span style='color:#0000ff; '>=</span> TRIANGLE<span style='color:#0000ff; '>;</span>
        else if<span style='color:#0000ff; '>(</span><span style='color:#0000ff; '>(</span>diffb1<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>diffb2<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span> <span style='color:#0000ff; '>&amp;</span><span style='color:#0000ff; '>&amp;</span> <span style='color:#0000ff; '>(</span>diffb3<span style='color:#0000ff; '>&lt;</span><span style='color:#800000; '>100</span><span style='color:#0000ff; '>)</span><span style='color:#0000ff; '>)</span>
            treasure <span style='color:#0000ff; '>=</span> SQUARE<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span>
            treasure <span style='color:#0000ff; '>=</span> DIAMOND<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        <span style='color:#0000ff; font-weight:bold; '>else</span> <span style='color:#0000ff; font-weight:bold; '>begin</span>
        treasure <span style='color:#0000ff; '>=</span> NONE<span style='color:#0000ff; '>;</span>
        <span style='color:#0000ff; font-weight:bold; '>end</span>
        done_treasure <span style='color:#0000ff; '>=</span> <span style='color:#800000; '>1</span>'b1<span style='color:#0000ff; '>;</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    <span style='color:#0000ff; font-weight:bold; '>end</span>
    </pre>
    <!--Created using ToHtml.com on 2018-12-04 20:26:50 UTC -->
  <p ALIGN=LEFT>
        In the code above, g1-g6 shows which bar has greater color concentration 
        while diffb and diffr are the actual color differences.        
  </p>
  
              
              <h1>Concusion</h1>
              <p ALIGN=LEFT>
                    We were able to detect both color and shape detection on the FPGA and mounted
                    the camera onto the robot chassis. Moving forward, we can explore implementing 
                    the averaging on the FPGA instead of the Arduino for more timely image processing 
                    averages. We can also improve reliability by increasing the number of bars. This
                    will increase code density but will likely improve accuracy. The greatest challenge
                    to accuracy of the camera remains that the camera needs good lighting to capture reliable 
                    images.  
              </p>
              </p>
              <a class="btn btn-primary btn-lg rounded-pill portfolio-modal-dismiss" href="#">
                <i class="fa fa-close"></i>
                Close Project</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/freelancer.min.js"></script>

  </body>

</html>
